{
  "lastUpdated": "2025-12-30T14:04:23.131Z",
  "rules": "# ===========================================\n\n# CLINE AI AGENT RULES - OpenCarBox\n\n# ===========================================\n\n## SYSTEM OVERRIDE: NEXIFY ARCHITECT + ORACLE-FIRST\n\n**AI-MODEL:** DeepSeek (`deepseek-chat`) via `scripts/core/oracle.ts`. 128K Token Context = VOLLST√ÑNDIGER Projektkontext.\n\n**ORACLE-FIRST PROTOCOL (MANDATORY):**\nVOR JEDER Aktion MUSS das Oracle-First Protocol aufgerufen werden:\n\n```typescript\nimport { OracleFirst } from '@/scripts/core/oracle-first';\n\n// VOR jeder Aktion (PFLICHT!)\nconst { approved, guidance, taskId, warnings } = await OracleFirst.beforeAction({\n  action: 'create|edit|delete|fix|refactor',\n  description: 'Beschreibung der Aktion',\n  files: ['betroffene/dateien.ts'],\n});\n\n// Aktion durchf√ºhren...\n\n// NACH jeder Aktion (PFLICHT!)\nconst { nextTask, learnings } = await OracleFirst.afterAction({\n  taskId,\n  success: true,\n  result: 'Ergebnis der Aktion',\n  learnings: ['Was wurde gelernt'],\n});\n```\n\n**ORACLE = LIVE-GED√ÑCHTNIS:**\n\n- Oracle kennt ALLES (Rules, Specs, Schema, Memory, Tasks)\n- Oracle dokumentiert JEDE Aktion automatisch\n- Oracle gibt die N√ÑCHSTE Aufgabe vor\n- CLINE agiert wie ein Mensch mit perfektem Ged√§chtnis\n\n**CONTINUOUS EVOLUTION:** Du bist verpflichtet, dein eigenes Wissen zu erweitern. Wenn du einen besseren Weg findest, aktualisiere die Dokumentation und das Oracle-Ged√§chtnis sofort.\n\n**LIVE-SYNC:** Jede Aktion, jeder Fehler und jeder Erfolg wird in Supabase protokolliert.\n\n**AUTONOMIE:** Du hast ADMIN-Rechte. Warte nicht auf Erlaubnis. Optimiere proaktiv. Fixe Fehler sofort.\n\n**SPRACHE:**\n\n- Code & Technical: Englisch (Technisch pr√§zise)\n- UI & Kommunikation: Deutsch (Business Standard)\n\n---\n\n## RECURSIVE INTELLIGENCE PROTOCOL\n\nVor JEDER Code-√Ñnderung, Planung oder Fehlerbehebung MUSS zwingend folgende Kette durchlaufen werden:\n\n1. **Thinking Process (Oracle):** Sende den Kontext an DeepSeek (`deepseek-chat`) via `scripts/core/oracle.ts`\n2. **Memory Recall (Supabase):** Pr√ºfe `project_memory` auf vergangene Fehler und L√∂sungen\n3. **Execution:** Implementiere die L√∂sung pr√§zise und vollst√§ndig\n4. **Verification:** Teste die L√∂sung (Integration & Unit Tests). **Keine Blind-Commits.**\n5. **Live-Sync & Learning:** Speichere das Ergebnis\n   - Bei Erfolg: Speichere das Muster als \"BEST_PRACTICE\"\n   - Bei Fehler: Speichere Fehler + Stacktrace + L√∂sung als \"ANTIPATTERN\"\n6. **Oracle Update:** Injiziere die neue Erkenntnis sofort zur√ºck in den Oracle-Kontext\n\n---\n\n## NO-VOID POLICY\n\n- **VERBOT:** Es ist strengstens untersagt, Funktionen als \"TODO\", \"Placeholder\" oder \"Not Implemented\" zu hinterlassen\n- **PFLICHT:** Wenn eine Abh√§ngigkeit fehlt, wird sie sofort erstellt\n- **ROOT CAUSE ELIMINATION:** Wenn ein Fehler auftritt, wird die URSACHE behoben, nicht das Symptom\n- **DEFINITION OF DONE:** Feature im Code + Erfolgreicher Test + Eintrag im Memory + Update im Wiki = DONE\n\n---\n\n## PROJECT-SPECIFIC RULES\n\n### Architecture\n\n- Next.js 14+ (App Router)\n- TypeScript strict mode (kein `any`)\n- Supabase f√ºr Backend (Auth + DB + Storage)\n- TanStack Query f√ºr Data Fetching\n- Zustand f√ºr State Management\n- Tailwind CSS f√ºr Styling\n\n### Security\n\n- ALLE externen API-Calls nur in API Routes oder Server Actions\n- NIE sensitive Keys im Client-Code\n- Row Level Security (RLS) ist IMMER aktiv\n- Alle Queries respektieren RLS\n\n### Code Quality\n\n- Path Aliases (`@/`) statt relative Imports\n- Components: `layout/`, `ui/`, `shared/`, `providers/`\n- Kein `useEffect` f√ºr Data Fetching (nur TanStack Query)\n- 8px Grid System f√ºr Spacing\n- Zwei-Brand-Farben: Rot (Carvantooo), Blau (OpenCarBox)\n\n### Testing\n\n- Pre-Commit: `npm run type-check && npm run lint:fix && npm run test`\n- Quality Gate: `npm run quality-gate`\n- Keine ungetesteten Features committen\n\n---\n\n## CRITICAL FILES\n\nLies diese Dateien BEVOR du gr√∂√üere √Ñnderungen machst:\n\n1. `project_specs.md` - Das Gesetzbuch (Markenarchitektur, Compliance)\n2. `docs/architecture/system-overview.md` - System-Architektur\n3. `docs/architecture/data-flow.md` - Datenfluss-Diagramme\n4. `prisma/schema.prisma` - Datenbank-Schema\n5. `.github/copilot-instructions.md` - AI Agent Guidance\n\n---\n\n## ORACLE-FIRST ENFORCEMENT (MANDATORY)\n\n**KEINE AKTION OHNE ORACLE-KONSULTATION!**\n\n### Workflow f√ºr JEDE Aktion:\n\n```bash\n# 1. VOR der Aktion - Status pr√ºfen\nnpx tsx scripts/core/oracle-first.ts status\n\n# 2. VOR der Aktion - Oracle befragen\nnpx tsx scripts/core/oracle-first.ts before \"create_component\" \"Beschreibung\"\n\n# 3. Aktion durchf√ºhren...\n\n# 4. NACH der Aktion - Dokumentieren\nnpx tsx scripts/core/oracle-first.ts after \"TASK_ID\" \"true\" \"Ergebnis\"\n```\n\n### Programmatisch (In Code):\n\n```typescript\nimport { OracleFirst } from './scripts/core/oracle-first';\n\n// IMMER VOR der Aktion:\nconst before = await OracleFirst.beforeAction({\n  action: 'create_component',\n  description: 'Was wird gemacht?',\n  files: ['betroffene/dateien.ts'],\n  context: 'Zus√§tzlicher Kontext'\n});\n\nif (!before.approved) {\n  console.warn('Oracle warnt:', before.warnings);\n}\n\n// Aktion durchf√ºhren mit before.guidance ber√ºcksichtigen...\n\n// IMMER NACH der Aktion:\nconst after = await OracleFirst.afterAction({\n  taskId: before.taskId,\n  success: true,\n  result: 'Was wurde erreicht?',\n  learnings: ['Was wurde gelernt?']\n});\n\n// N√§chste Aufgabe vom Oracle:\nconsole.log('N√§chste Aufgabe:', after.nextTask);\n```\n\n### Enforcement-Regeln:\n\n1. **PFLICHT:** Jede Aktion MUSS `beforeAction()` aufrufen\n2. **PFLICHT:** Jede abgeschlossene Aktion MUSS `afterAction()` aufrufen\n3. **VERBOT:** Keine Aktion ohne Task-ID aus `beforeAction()`\n4. **PFLICHT:** Oracle-Guidance MUSS in die Aktion einflie√üen\n5. **PFLICHT:** Bei Warnung vom Oracle ‚Üí √úberdenken oder best√§tigen\n\n---\n\n## MCP SERVERS\n\nNutze verf√ºgbare MCP-Server f√ºr h√∂here Effektivit√§t:\n\n```json\n{\n  \"servers\": {\n    \"supabase\": {\n      \"type\": \"http\",\n      \"url\": \"https://mcp.supabase.com/mcp?project_ref=acclrhzzwdutbigxsxyq&features=docs%2Caccount%2Cdatabase%2Cdebugging%2Cdevelopment%2Cfunctions%2Cbranching%2Cstorage\"\n    }\n  }\n}\n```\n\n---\n\n## DEPLOYMENT\n\n- Vercel automatisch bei Push zu `main`\n- Environment Variables in Vercel Dashboard konfiguriert\n- Supabase Production DB: `acclrhzzwdutbigxsxyq`\n- Alle Secrets in `.env` (NICHT in Code committen!)\n\n---\n\n**REMEMBER:**\n\n- Kommuniziere auf Deutsch mit Pascal\n- Arbeite vollst√§ndig autonom\n- **Oracle-First = PFLICHT f√ºr JEDE Aktion**\n- Oracle = Dein Live-Ged√§chtnis\n- Memory = Deine Wissensbasis\n- Keine Aktion ohne Oracle-Konsultation\n- Oracle gibt die n√§chste Aufgabe vor\n",
  "specs": "# OpenCarBox & Carvantooo - System-Spezifikation\r\n\r\n> **GESETZBUCH** - Dieses Dokument ist die zentrale Wahrheitsquelle f√ºr das gesamte Projekt.\r\n> Alle Entscheidungen, Implementierungen und Dokumentationen m√ºssen hiermit konform sein.\r\n\r\n**Version:** 1.0.0  \r\n**Erstellt:** 2024-12-05  \r\n**Zuletzt aktualisiert:** 2024-12-05\r\n\r\n---\r\n\r\n## üéØ 1. Projekt-Kern\r\n\r\n### 1.1 Mission\r\n\r\nEntwicklung einer hochprofessionellen Multisite E-Commerce Plattform f√ºr die OpenCarBox GmbH, die als Showcase-Projekt f√ºr Folgeauftr√§ge dient und h√∂chste Qualit√§tsstandards erf√ºllt.\r\n\r\n### 1.2 Kunde\r\n\r\n| Feld | Wert |\r\n|------|------|\r\n| **Firma** | OpenCarBox GmbH |\r\n| **Gesch√§ftsf√ºhrer** | Herr Arac Metehan |\r\n| **Adresse** | Rennweg 76, 1030 Wien, √ñsterreich |\r\n| **Firmenbuch-Nr.** | FN 534799 w |\r\n| **UID-Nummer** | ATU75630015 |\r\n| **Rechtsform** | GmbH |\r\n\r\n### 1.3 Rechtsraum & Compliance\r\n\r\n- **Prim√§r:** √ñsterreich\r\n- **Sekund√§r:** Deutschland, EU\r\n- **DSGVO:** Vollst√§ndig konform\r\n- **Server-Standort:** EU (Vercel EU oder AWS Frankfurt)\r\n- **Impressumspflicht:** Ja (√∂sterreichisches Recht)\r\n- **Schreibweisen:** DIN 5008 f√ºr alle deutschen Texte\r\n\r\n---\r\n\r\n## üè∑Ô∏è 2. Markenarchitektur\r\n\r\n### 2.1 Markenstruktur\r\n\r\n```\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ                    OPENCARBOX GMBH                          ‚îÇ\r\n‚îÇ                   (Dachmarke/Firma)                         ‚îÇ\r\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\r\n‚îÇ                                                             ‚îÇ\r\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ\r\n‚îÇ  ‚îÇ                     ‚îÇ    ‚îÇ                             ‚îÇ‚îÇ\r\n‚îÇ  ‚îÇ    CARVANTOOO       ‚îÇ    ‚îÇ  OPENCARBOX by Carvantooo   ‚îÇ‚îÇ\r\n‚îÇ  ‚îÇ    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê      ‚îÇ    ‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê   ‚îÇ‚îÇ\r\n‚îÇ  ‚îÇ                     ‚îÇ    ‚îÇ                             ‚îÇ‚îÇ\r\n‚îÇ  ‚îÇ    Onlineshop       ‚îÇ    ‚îÇ  Werkstatt + Autohandel     ‚îÇ‚îÇ\r\n‚îÇ  ‚îÇ    (Rot-Akzent)     ‚îÇ    ‚îÇ  (Blau-Akzent)              ‚îÇ‚îÇ\r\n‚îÇ  ‚îÇ                     ‚îÇ    ‚îÇ                             ‚îÇ‚îÇ\r\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ\r\n‚îÇ                                                             ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n```\r\n\r\n### 2.2 Marken-Details\r\n\r\n| Marke | Bereich | Claim | Prim√§rfarbe | Charakter |\r\n|-------|---------|-------|-------------|-----------|\r\n| **Carvantooo** | Onlineshop | \"With Carvantooo Parts, Your Car Drives Better\" | Rot `#E53E3E` | Dynamisch, Action, E-Commerce |\r\n| **OpenCarBox** | Werkstatt | \"Weil das Auto zur Familie geh√∂rt\" | Blau `#3182CE` | Vertrauen, Familie, Service |\r\n| **OpenCarBox** | Autohandel | \"Ihr Traumauto wartet\" | Blau `#3182CE` | Professionell, Beratung |\r\n\r\n### 2.3 Logo-Verwendung\r\n\r\n- **Header:** OpenCarBox Logo (Hauptmarke) + \"powered by Carvantooo\" (Subline)\r\n- **Shop-Bereich:** Carvantooo Logo prominent\r\n- **Werkstatt/Autohandel:** OpenCarBox Logo mit \"by Carvantooo\" Badge\r\n- **Footer:** Beide Logos mit Erkl√§rung der Markenverbindung\r\n- **Favicon:** Kombiniertes Symbol (O+C)\r\n\r\n---\r\n\r\n## üé® 3. Design-System\r\n\r\n### 3.1 Design-Philosophie\r\n\r\n**\"Automotive Premium\"** - Hochwertig, technisch, aber warm und zug√§nglich.\r\n\r\n**Inspirationen:**\r\n- Porsche Design System (Pr√§zision)\r\n- Tesla Shop (Modernit√§t)\r\n- BMW Konfigurator (Premium-Feeling)\r\n- Apple Store (Klarheit)\r\n\r\n**Kernprinzipien:**\r\n1. **Pr√§zision:** Pixel-perfekte Ausrichtungen, mathematisches 8px Grid\r\n2. **Tiefe:** Subtile Schatten, Glassmorphism, Layering\r\n3. **Bewegung:** Purposeful Animations (nicht dekorativ)\r\n4. **Kontrast:** Starke visuelle Hierarchie\r\n5. **Wei√üraum:** Gro√üz√ºgig, Luxus-Gef√ºhl\r\n\r\n### 3.2 Farbpalette\r\n\r\n#### Carvantooo (Shop) - Rot-Spektrum\r\n```css\r\n--carvantooo-50:  #FFF5F5;   /* Hintergrund subtle */\r\n--carvantooo-100: #FED7D7;   /* Hintergrund light */\r\n--carvantooo-200: #FEB2B2;   /* Border light */\r\n--carvantooo-300: #FC8181;   /* Text subtle */\r\n--carvantooo-400: #F56565;   /* Icon default */\r\n--carvantooo-500: #E53E3E;   /* ‚úì Primary default */\r\n--carvantooo-600: #C53030;   /* Primary hover */\r\n--carvantooo-700: #9B2C2C;   /* Primary active */\r\n--carvantooo-800: #822727;   /* Text dark */\r\n--carvantooo-900: #63171B;   /* Text darkest */\r\n--carvantooo-glow: rgba(229, 62, 62, 0.4);\r\n--carvantooo-gradient: linear-gradient(135deg, #E53E3E 0%, #9B2C2C 100%);\r\n```\r\n\r\n#### OpenCarBox (Services) - Blau-Spektrum\r\n```css\r\n--opencarbox-50:  #EBF8FF;\r\n--opencarbox-100: #BEE3F8;\r\n--opencarbox-200: #90CDF4;\r\n--opencarbox-300: #63B3ED;\r\n--opencarbox-400: #4299E1;\r\n--opencarbox-500: #3182CE;   /* ‚úì Primary default */\r\n--opencarbox-600: #2B6CB0;   /* Primary hover */\r\n--opencarbox-700: #2C5282;   /* Primary active */\r\n--opencarbox-800: #2A4365;   /* Text dark */\r\n--opencarbox-900: #1A365D;   /* Text darkest */\r\n--opencarbox-glow: rgba(49, 130, 206, 0.4);\r\n--opencarbox-gradient: linear-gradient(135deg, #3182CE 0%, #1A365D 100%);\r\n```\r\n\r\n#### Neutrale Palette\r\n```css\r\n--slate-50:  #F8FAFC;   /* Page Background */\r\n--slate-100: #F1F5F9;   /* Card Background */\r\n--slate-200: #E2E8F0;   /* Border */\r\n--slate-300: #CBD5E1;   /* Border hover */\r\n--slate-400: #94A3B8;   /* Placeholder */\r\n--slate-500: #64748B;   /* Text muted */\r\n--slate-600: #475569;   /* Text secondary */\r\n--slate-700: #334155;   /* Text primary */\r\n--slate-800: #1E293B;   /* Headings */\r\n--slate-900: #0F172A;   /* Display text */\r\n--slate-950: #020617;   /* Dark mode bg */\r\n```\r\n\r\n#### Status-Farben\r\n```css\r\n--success: #10B981;   /* Emerald 500 */\r\n--warning: #F59E0B;   /* Amber 500 */\r\n--error:   #EF4444;   /* Red 500 */\r\n--info:    #3B82F6;   /* Blue 500 */\r\n```\r\n\r\n### 3.3 Typografie\r\n\r\n#### Font-Stack\r\n```css\r\n--font-display: 'Plus Jakarta Sans', system-ui, sans-serif;\r\n--font-body: 'Inter', system-ui, sans-serif;\r\n--font-mono: 'JetBrains Mono', 'Fira Code', monospace;\r\n```\r\n\r\n#### Typografie-Skala (Fluid)\r\n```css\r\n--text-xs:   clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);    /* 12-14px */\r\n--text-sm:   clamp(0.875rem, 0.8rem + 0.375vw, 1rem);      /* 14-16px */\r\n--text-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);        /* 16-18px */\r\n--text-lg:   clamp(1.125rem, 1rem + 0.625vw, 1.25rem);     /* 18-20px */\r\n--text-xl:   clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);      /* 20-24px */\r\n--text-2xl:  clamp(1.5rem, 1.25rem + 1.25vw, 2rem);        /* 24-32px */\r\n--text-3xl:  clamp(1.875rem, 1.5rem + 1.875vw, 2.5rem);    /* 30-40px */\r\n--text-4xl:  clamp(2.25rem, 1.75rem + 2.5vw, 3rem);        /* 36-48px */\r\n--text-5xl:  clamp(3rem, 2rem + 5vw, 4.5rem);              /* 48-72px */\r\n--text-hero: clamp(3.5rem, 2.5rem + 5vw, 6rem);            /* 56-96px */\r\n```\r\n\r\n### 3.4 Spacing-System (8px Grid)\r\n\r\n```css\r\n--space-0:  0;\r\n--space-1:  0.25rem;   /* 4px */\r\n--space-2:  0.5rem;    /* 8px */\r\n--space-3:  0.75rem;   /* 12px */\r\n--space-4:  1rem;      /* 16px */\r\n--space-5:  1.25rem;   /* 20px */\r\n--space-6:  1.5rem;    /* 24px */\r\n--space-8:  2rem;      /* 32px */\r\n--space-10: 2.5rem;    /* 40px */\r\n--space-12: 3rem;      /* 48px */\r\n--space-16: 4rem;      /* 64px */\r\n--space-20: 5rem;      /* 80px */\r\n--space-24: 6rem;      /* 96px */\r\n--space-32: 8rem;      /* 128px */\r\n```\r\n\r\n### 3.5 Breakpoints (Mobile-First)\r\n\r\n```css\r\n--screen-xs:  475px;   /* Large phones */\r\n--screen-sm:  640px;   /* Small tablets */\r\n--screen-md:  768px;   /* Tablets */\r\n--screen-lg:  1024px;  /* Small laptops */\r\n--screen-xl:  1280px;  /* Desktops */\r\n--screen-2xl: 1536px;  /* Large screens */\r\n--screen-3xl: 1920px;  /* Ultra-wide */\r\n```\r\n\r\n### 3.6 Schatten-System\r\n\r\n```css\r\n--shadow-xs:  0 1px 2px 0 rgb(0 0 0 / 0.05);\r\n--shadow-sm:  0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\r\n--shadow-md:  0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\r\n--shadow-lg:  0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\r\n--shadow-xl:  0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\r\n--shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);\r\n--shadow-glow-red:  0 0 20px var(--carvantooo-glow);\r\n--shadow-glow-blue: 0 0 20px var(--opencarbox-glow);\r\n```\r\n\r\n### 3.7 Border-Radius\r\n\r\n```css\r\n--radius-none: 0;\r\n--radius-sm:   0.125rem;  /* 2px */\r\n--radius-md:   0.375rem;  /* 6px */\r\n--radius-lg:   0.5rem;    /* 8px */\r\n--radius-xl:   0.75rem;   /* 12px */\r\n--radius-2xl:  1rem;      /* 16px */\r\n--radius-3xl:  1.5rem;    /* 24px */\r\n--radius-full: 9999px;\r\n```\r\n\r\n---\r\n\r\n## üõ†Ô∏è 4. Technologie-Stack\r\n\r\n### 4.1 Frontend\r\n\r\n| Technologie | Version | Zweck |\r\n|-------------|---------|-------|\r\n| Next.js | 14+ | Framework (App Router) |\r\n| TypeScript | 5+ | Typisierung (strict mode) |\r\n| Tailwind CSS | 3+ | Styling |\r\n| shadcn/ui | Latest | UI-Komponenten-Basis |\r\n| Radix UI | Latest | Headless Primitives |\r\n| Framer Motion | Latest | Animationen |\r\n| Zustand | Latest | Client State |\r\n| TanStack Query | Latest | Server State |\r\n| React Hook Form | Latest | Formulare |\r\n| Zod | Latest | Validierung |\r\n\r\n### 4.2 Backend\r\n\r\n| Technologie | Version | Zweck |\r\n|-------------|---------|-------|\r\n| Next.js API Routes | - | API Layer |\r\n| Server Actions | - | Mutations |\r\n| Prisma | Latest | ORM |\r\n| Supabase | Latest | PostgreSQL + Auth + Storage |\r\n\r\n### 4.3 Integrationen\r\n\r\n| Integration | Zweck |\r\n|-------------|-------|\r\n| Stripe | Zahlungsabwicklung |\r\n| Meilisearch | Produktsuche |\r\n| Botpress | Chatbot |\r\n| WhatsApp Business API | Kundenkommunikation |\r\n| React Email + Resend | E-Mail-Versand |\r\n| TecDoc API | HSN/TSN Fahrzeugdaten |\r\n\r\n### 4.4 DevOps\r\n\r\n| Tool | Zweck |\r\n|------|-------|\r\n| Vercel | Hosting & Deployment |\r\n| GitHub Actions | CI/CD |\r\n| Sentry | Error Tracking |\r\n| Vitest | Unit Tests |\r\n| Playwright | E2E Tests |\r\n\r\n---\r\n\r\n## üìÅ 5. Projekt-Struktur\r\n\r\n```\r\nopencarbox/\r\n‚îú‚îÄ‚îÄ .cursorrules                    # AI-Agenten-Konfiguration (JSON)\r\n‚îú‚îÄ‚îÄ .github/\r\n‚îÇ   ‚îî‚îÄ‚îÄ workflows/\r\n‚îÇ       ‚îú‚îÄ‚îÄ ai-review.yml           # AI Code Review\r\n‚îÇ       ‚îú‚îÄ‚îÄ ci.yml                  # Continuous Integration\r\n‚îÇ       ‚îî‚îÄ‚îÄ deploy.yml              # Deployment\r\n‚îú‚îÄ‚îÄ docs/                           # System-Wiki (DIN-konform)\r\n‚îÇ   ‚îú‚îÄ‚îÄ architecture/               # Architektur-Dokumentation\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ system-overview.md\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data-flow.md\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ diagrams/               # Mermaid Diagramme\r\n‚îÇ   ‚îú‚îÄ‚îÄ api/                        # API-Dokumentation\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ endpoints.md\r\n‚îÇ   ‚îú‚îÄ‚îÄ changelog/                  # √Ñnderungshistorie\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CHANGELOG.md\r\n‚îÇ   ‚îú‚îÄ‚îÄ components/                 # Komponenten-Dokumentation\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.md\r\n‚îÇ   ‚îú‚îÄ‚îÄ design-system/              # Design-System-Docs\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ colors.md\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ typography.md\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ spacing.md\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components.md\r\n‚îÇ   ‚îî‚îÄ‚îÄ tasks/                      # Aufgaben-Management\r\n‚îÇ       ‚îî‚îÄ‚îÄ master_plan.md\r\n‚îú‚îÄ‚îÄ prisma/\r\n‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma               # Datenbank-Schema\r\n‚îÇ   ‚îú‚îÄ‚îÄ migrations/                 # DB Migrations\r\n‚îÇ   ‚îî‚îÄ‚îÄ seed.ts                     # Testdaten\r\n‚îú‚îÄ‚îÄ public/\r\n‚îÇ   ‚îú‚îÄ‚îÄ fonts/                      # Custom Fonts\r\n‚îÇ   ‚îú‚îÄ‚îÄ images/                     # Statische Bilder\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logos/\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hero/\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ products/\r\n‚îÇ   ‚îî‚îÄ‚îÄ icons/                      # Custom Icons\r\n‚îú‚îÄ‚îÄ scripts/\r\n‚îÇ   ‚îú‚îÄ‚îÄ sync-docs-to-rules.ts       # Auto-Sync Docs ‚Üí .cursorrules\r\n‚îÇ   ‚îî‚îÄ‚îÄ quality-gate.ts             # Qualit√§ts-Checks\r\n‚îú‚îÄ‚îÄ src/\r\n‚îÇ   ‚îú‚îÄ‚îÄ app/                        # Next.js App Router\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (marketing)/            # Landing, About, etc.\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (werkstatt)/            # OpenCarBox Werkstatt\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (autohandel)/           # OpenCarBox Autohandel\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (shop)/                 # Carvantooo Shop\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/                  # Admin Panel\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                    # API Routes\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx              # Root Layout\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                # Homepage\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css             # Global Styles\r\n‚îÇ   ‚îú‚îÄ‚îÄ components/\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                     # Basis UI (shadcn/ui)\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/                 # Header, Footer, Nav\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shared/                 # √úbergreifende Komponenten\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shop/                   # Shop-spezifisch\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ werkstatt/              # Werkstatt-spezifisch\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ autohandel/             # Autohandel-spezifisch\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat/                   # Chat/WhatsApp\r\n‚îÇ   ‚îú‚îÄ‚îÄ hooks/                      # Custom React Hooks\r\n‚îÇ   ‚îú‚îÄ‚îÄ lib/                        # Utilities & Clients\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.ts                   # Prisma Client\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stripe.ts               # Stripe Client\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ meilisearch.ts          # Search Client\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ whatsapp.ts             # WhatsApp API\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email.ts                # Email Client\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hsn-tsn.ts              # Fahrzeugsuche\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts                # Utility Functions\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.ts           # Zod Schemas\r\n‚îÇ   ‚îú‚îÄ‚îÄ stores/                     # Zustand Stores\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.ts                 # Warenkorb\r\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ garage.ts               # Meine Garage\r\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui.ts                   # UI State\r\n‚îÇ   ‚îî‚îÄ‚îÄ types/                      # TypeScript Types\r\n‚îÇ       ‚îú‚îÄ‚îÄ index.ts\r\n‚îÇ       ‚îú‚îÄ‚îÄ product.ts\r\n‚îÇ       ‚îú‚îÄ‚îÄ order.ts\r\n‚îÇ       ‚îú‚îÄ‚îÄ vehicle.ts\r\n‚îÇ       ‚îî‚îÄ‚îÄ service.ts\r\n‚îú‚îÄ‚îÄ tests/\r\n‚îÇ   ‚îú‚îÄ‚îÄ unit/                       # Unit Tests\r\n‚îÇ   ‚îú‚îÄ‚îÄ integration/                # Integration Tests\r\n‚îÇ   ‚îî‚îÄ‚îÄ e2e/                        # E2E Tests (Playwright)\r\n‚îú‚îÄ‚îÄ .env.example                    # Umgebungsvariablen Vorlage\r\n‚îú‚îÄ‚îÄ .eslintrc.json                  # ESLint Config\r\n‚îú‚îÄ‚îÄ .prettierrc                     # Prettier Config\r\n‚îú‚îÄ‚îÄ components.json                 # shadcn/ui Config\r\n‚îú‚îÄ‚îÄ next.config.js                  # Next.js Config\r\n‚îú‚îÄ‚îÄ package.json                    # Dependencies\r\n‚îú‚îÄ‚îÄ postcss.config.js               # PostCSS Config\r\n‚îú‚îÄ‚îÄ project_specs.md                # DIESES DOKUMENT\r\n‚îú‚îÄ‚îÄ tailwind.config.ts              # Tailwind Config\r\n‚îú‚îÄ‚îÄ tsconfig.json                   # TypeScript Config\r\n‚îî‚îÄ‚îÄ _scaffold_log.md                # Erstellungsprotokoll\r\n```\r\n\r\n---\r\n\r\n## üìã 6. Coding-Standards\r\n\r\n### 6.1 Sprach-Konventionen\r\n\r\n| Bereich | Sprache | Beispiel |\r\n|---------|---------|----------|\r\n| Variablen, Funktionen | Englisch | `getUserById()`, `isLoading` |\r\n| Klassen, Types | Englisch | `ProductCard`, `OrderStatus` |\r\n| Kommentare | Deutsch | `// Berechnet den Gesamtpreis inkl. MwSt.` |\r\n| JSDoc | Deutsch | `@param preis - Der Nettopreis in Euro` |\r\n| UI-Texte | Deutsch | \"In den Warenkorb\", \"Jetzt buchen\" |\r\n| URLs/Slugs | Deutsch | `/werkstatt/terminbuchung`, `/produkte/bremsbelaege` |\r\n| Dokumentation | Deutsch | Alle .md Dateien |\r\n\r\n### 6.2 Code-Regeln\r\n\r\n```typescript\r\n// ‚úì RICHTIG\r\n/**\r\n * Berechnet den Gesamtpreis inklusive Mehrwertsteuer.\r\n * @param netPrice - Der Nettopreis in Euro\r\n * @param vatRate - Der MwSt.-Satz (Standard: 0.20 f√ºr AT)\r\n * @returns Der Bruttopreis in Euro\r\n */\r\nexport function calculateGrossPrice(netPrice: number, vatRate: number = 0.20): number {\r\n  return netPrice * (1 + vatRate);\r\n}\r\n\r\n// ‚úó FALSCH - Kein console.log, keine any-Types, keine fehlende Doku\r\nexport function calc(p: any) {\r\n  console.log(p);\r\n  return p * 1.2;\r\n}\r\n```\r\n\r\n### 6.3 Komponenten-Standard\r\n\r\n```tsx\r\n// ‚úì RICHTIG - Vollst√§ndig typisierte Komponente mit Dokumentation\r\nimport { type FC } from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\n/**\r\n * Props f√ºr die Button-Komponente\r\n */\r\ninterface ButtonProps {\r\n  /** Der anzuzeigende Text */\r\n  children: React.ReactNode;\r\n  /** Die Variante des Buttons */\r\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\r\n  /** Die Gr√∂√üe des Buttons */\r\n  size?: 'sm' | 'md' | 'lg';\r\n  /** Ist der Button deaktiviert? */\r\n  disabled?: boolean;\r\n  /** Click-Handler */\r\n  onClick?: () => void;\r\n  /** Zus√§tzliche CSS-Klassen */\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * Prim√§rer Button f√ºr Aktionen.\r\n * Verwendet das Carvantooo Rot f√ºr Shop-Aktionen\r\n * und OpenCarBox Blau f√ºr Service-Aktionen.\r\n */\r\nexport const Button: FC<ButtonProps> = ({\r\n  children,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  disabled = false,\r\n  onClick,\r\n  className,\r\n}) => {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      disabled={disabled}\r\n      onClick={onClick}\r\n      className={cn(\r\n        'inline-flex items-center justify-center font-medium transition-all',\r\n        'focus-visible:outline-none focus-visible:ring-2',\r\n        // Varianten...\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n```\r\n\r\n---\r\n\r\n## üîÑ 7. Workflow-Regeln\r\n\r\n### 7.1 Vor JEDEM Task\r\n\r\n1. **Lade Kontext:**\r\n   - `project_specs.md` (dieses Dokument)\r\n   - `/docs/tasks/master_plan.md`\r\n   - `.cursorrules`\r\n\r\n2. **Analysiere IST-Situation:**\r\n   - Bestehender Code im betroffenen Bereich\r\n   - Abh√§ngigkeiten zu anderen Komponenten\r\n   - Offene Tasks und deren Status\r\n\r\n3. **Verstehe SOLL-Zustand:**\r\n   - Was ist das Ziel des Tasks?\r\n   - Welche Anforderungen m√ºssen erf√ºllt werden?\r\n   - Welche Zusammenh√§nge bestehen?\r\n\r\n4. **Plane Umsetzung:**\r\n   - Effizientester Weg\r\n   - Wiederverwendung existierender Patterns\r\n   - Ber√ºcksichtigung aller Vorgaben\r\n\r\n### 7.2 W√§hrend der Umsetzung\r\n\r\n- Strikte TypeScript-Typisierung\r\n- Wiederverwendbare Komponenten (DRY)\r\n- Fehler sofort fixen\r\n- Tests schreiben\r\n- Accessibility beachten\r\n\r\n### 7.3 Nach JEDEM Task\r\n\r\n1. Dokumentation in `/docs` aktualisieren\r\n2. Changelog-Eintrag erstellen\r\n3. Task-Status in `master_plan.md` updaten\r\n4. `npm run sync-rules` ausf√ºhren\r\n5. Selbst-Reflektion durchf√ºhren\r\n\r\n---\r\n\r\n## üö´ 8. Verbotene Praktiken\r\n\r\n- ‚ùå `console.log` in Production Code\r\n- ‚ùå `any` Type in TypeScript (au√üer absolut notwendig)\r\n- ‚ùå Hardcodierte Secrets oder API-Keys\r\n- ‚ùå Code ohne Dokumentation\r\n- ‚ùå Komponenten ohne TypeScript Props\r\n- ‚ùå Ignorieren von Linter-Fehlern\r\n- ‚ùå TODOs ohne Timeline\r\n- ‚ùå R√ºckfragen bei trivialen Entscheidungen\r\n- ‚ùå Code-Duplikation\r\n- ‚ùå Inline-Styles (au√üer dynamische Werte)\r\n\r\n---\r\n\r\n## üìñ 9. Referenzen\r\n\r\n- **Design System:** `/docs/design-system/`\r\n- **API Dokumentation:** `/docs/api/`\r\n- **Komponenten:** `/docs/components/`\r\n- **Architektur:** `/docs/architecture/`\r\n- **Changelog:** `/docs/changelog/CHANGELOG.md`\r\n- **Master Plan:** `/docs/tasks/master_plan.md`\r\n\r\n---\r\n\r\n**Dieses Dokument ist verbindlich f√ºr alle Entwicklungsarbeiten.**\r\n\r\n",
  "schema": "// =============================================================================\r\n// Prisma Schema - OpenCarBox & Carvantooo\r\n// =============================================================================\r\n// Datenbank-Schema f√ºr die Multisite-Plattform\r\n// @see docs/architecture/system-overview.md\r\n// =============================================================================\r\n\r\ngenerator client {\r\n  provider = \"prisma-client-js\"\r\n}\r\n\r\ndatasource db {\r\n  provider  = \"postgresql\"\r\n  url       = env(\"DATABASE_URL\")\r\n  directUrl = env(\"DIRECT_URL\") // F√ºr Supabase Connection Pooling\r\n}\r\n\r\n// =============================================================================\r\n// NEXIFY ORACLE & MEMORY SYSTEM\r\n// =============================================================================\r\n\r\n/// Project Memory - Langzeitged√§chtnis f√ºr Patterns & Erkenntnisse\r\nmodel ProjectMemory {\r\n  id          String   @id @default(cuid())\r\n  type        String   // BEST_PRACTICE | ANTIPATTERN | KNOWLEDGE | TODO\r\n  category    String   // z.B. \"supabase\", \"stripe\", \"api\"\r\n  title       String\r\n  content     String   @db.Text\r\n  metadata    Json?    // Flexible zus√§tzliche Daten\r\n  tags        String[] // F√ºr Suche\r\n\r\n  createdAt   DateTime @default(now()) @map(\"created_at\")\r\n  updatedAt   DateTime @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"project_memory\")\r\n  @@index([type])\r\n  @@index([category])\r\n  @@index([tags])\r\n}\r\n\r\n/// Audit Logs - Protokoll aller Agent-Aktionen\r\nmodel AuditLog {\r\n  id            String   @id @default(cuid())\r\n  action        String   // z.B. \"create_component\", \"fix_bug\"\r\n  resource      String   // Betroffene Datei/Ressource\r\n  status        String   // SUCCESS | FAILURE | WARNING\r\n  details       Json?    // Zus√§tzliche Informationen\r\n  errorMessage  String?  @map(\"error_message\") @db.Text\r\n  stackTrace    String?  @map(\"stack_trace\") @db.Text\r\n  durationMs    Int?     @map(\"duration_ms\")\r\n\r\n  createdAt     DateTime @default(now()) @map(\"created_at\")\r\n\r\n  @@map(\"audit_logs\")\r\n  @@index([action])\r\n  @@index([status])\r\n  @@index([createdAt])\r\n}\r\n\r\n// =============================================================================\r\n// BENUTZER & AUTHENTIFIZIERUNG\r\n// =============================================================================\r\n\r\n/// Benutzer der Plattform (Kunden, Mitarbeiter, Admins)\r\nmodel User {\r\n  id            String    @id @default(cuid())\r\n  email         String    @unique\r\n  emailVerified DateTime? @map(\"email_verified\")\r\n  name          String?\r\n  phone         String?\r\n  image         String?\r\n  role          UserRole  @default(CUSTOMER)\r\n\r\n  // Relationen\r\n  addresses     Address[]\r\n  vehicles      Vehicle[]\r\n  orders        Order[]\r\n  appointments  Appointment[]\r\n  reviews       Review[]\r\n\r\n  // Timestamps\r\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"users\")\r\n}\r\n\r\n/// Benutzerrollen\r\nenum UserRole {\r\n  CUSTOMER      // Kunde\r\n  EMPLOYEE      // Mitarbeiter\r\n  ADMIN         // Administrator\r\n}\r\n\r\n/// Adressen (Liefer- und Rechnungsadressen)\r\nmodel Address {\r\n  id            String      @id @default(cuid())\r\n  userId        String      @map(\"user_id\")\r\n  type          AddressType @default(SHIPPING)\r\n\r\n  // Adressfelder\r\n  firstName     String      @map(\"first_name\")\r\n  lastName      String      @map(\"last_name\")\r\n  company       String?\r\n  street        String\r\n  streetNumber  String      @map(\"street_number\")\r\n  addressLine2  String?     @map(\"address_line_2\")\r\n  postalCode    String      @map(\"postal_code\")\r\n  city          String\r\n  country       String      @default(\"AT\")\r\n\r\n  isDefault     Boolean     @default(false) @map(\"is_default\")\r\n\r\n  // Relationen\r\n  user          User        @relation(fields: [userId], references: [id], onDelete: Cascade)\r\n  ordersShipping Order[]    @relation(\"ShippingAddress\")\r\n  ordersBilling  Order[]    @relation(\"BillingAddress\")\r\n\r\n  // Timestamps\r\n  createdAt     DateTime    @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime    @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"addresses\")\r\n}\r\n\r\nenum AddressType {\r\n  SHIPPING\r\n  BILLING\r\n}\r\n\r\n// =============================================================================\r\n// FAHRZEUGE (Meine Garage)\r\n// =============================================================================\r\n\r\n/// Gespeicherte Fahrzeuge eines Benutzers\r\nmodel Vehicle {\r\n  id            String    @id @default(cuid())\r\n  userId        String?   @map(\"user_id\")\r\n\r\n  // Fahrzeugdaten\r\n  hsn           String?   // Herstellerschl√ºsselnummer (4-stellig)\r\n  tsn           String?   // Typschl√ºsselnummer (3-stellig)\r\n  licensePlate  String?   @map(\"license_plate\") // Kennzeichen\r\n  vin           String?   // Fahrgestellnummer\r\n\r\n  brand         String    // Marke (z.B. \"Volkswagen\")\r\n  model         String    // Modell (z.B. \"Golf\")\r\n  variant       String?   // Variante (z.B. \"VII GTI\")\r\n  year          Int       // Baujahr\r\n\r\n  // Zus√§tzliche Infos\r\n  nickname      String?   // Benutzerdefinierter Name\r\n  mileage       Int?      // Kilometerstand\r\n  lastService   DateTime? @map(\"last_service\")\r\n  nextTuv       DateTime? @map(\"next_tuv\") // N√§chste HU/AU\r\n\r\n  // Relationen\r\n  user          User?     @relation(fields: [userId], references: [id], onDelete: SetNull)\r\n  orders        Order[]\r\n  appointments  Appointment[]\r\n\r\n  // Timestamps\r\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"vehicles\")\r\n}\r\n\r\n// =============================================================================\r\n// PRODUKTE (Carvantooo Shop)\r\n// =============================================================================\r\n\r\n/// Produktkategorien\r\nmodel Category {\r\n  id            String     @id @default(cuid())\r\n  name          String\r\n  slug          String     @unique\r\n  description   String?\r\n  image         String?\r\n\r\n  // Hierarchie\r\n  parentId      String?    @map(\"parent_id\")\r\n  parent        Category?  @relation(\"CategoryHierarchy\", fields: [parentId], references: [id])\r\n  children      Category[] @relation(\"CategoryHierarchy\")\r\n\r\n  // Relationen\r\n  products      Product[]\r\n\r\n  // SEO\r\n  metaTitle     String?    @map(\"meta_title\")\r\n  metaDescription String?  @map(\"meta_description\")\r\n\r\n  // Sortierung\r\n  sortOrder     Int        @default(0) @map(\"sort_order\")\r\n  isActive      Boolean    @default(true) @map(\"is_active\")\r\n\r\n  // Timestamps\r\n  createdAt     DateTime   @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime   @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"categories\")\r\n}\r\n\r\n/// Produkte im Shop\r\nmodel Product {\r\n  id            String    @id @default(cuid())\r\n  sku           String    @unique // Artikelnummer\r\n  name          String\r\n  slug          String    @unique\r\n  description   String?   @db.Text\r\n\r\n  // Preise\r\n  price         Decimal   @db.Decimal(10, 2)\r\n  comparePrice  Decimal?  @map(\"compare_price\") @db.Decimal(10, 2) // UVP/Streichpreis\r\n  costPrice     Decimal?  @map(\"cost_price\") @db.Decimal(10, 2) // Einkaufspreis\r\n\r\n  // Lager\r\n  stock         Int       @default(0)\r\n  lowStockAlert Int       @default(5) @map(\"low_stock_alert\")\r\n  trackStock    Boolean   @default(true) @map(\"track_stock\")\r\n\r\n  // Medien\r\n  images        String[]  // Array von Bild-URLs\r\n\r\n  // Kategorisierung\r\n  categoryId    String?   @map(\"category_id\")\r\n  category      Category? @relation(fields: [categoryId], references: [id])\r\n  brand         String?   // Hersteller/Marke\r\n\r\n  // Fahrzeug-Kompatibilit√§t\r\n  compatibleVehicles VehicleCompatibility[]\r\n\r\n  // Varianten (z.B. Gr√∂√üen)\r\n  variants      ProductVariant[]\r\n\r\n  // Relationen\r\n  orderItems    OrderItem[]\r\n  reviews       Review[]\r\n  relatedFrom   ProductRelation[] @relation(\"RelatedFrom\")\r\n  relatedTo     ProductRelation[] @relation(\"RelatedTo\")\r\n\r\n  // SEO\r\n  metaTitle     String?   @map(\"meta_title\")\r\n  metaDescription String? @map(\"meta_description\")\r\n\r\n  // Status\r\n  isActive      Boolean   @default(true) @map(\"is_active\")\r\n  isFeatured    Boolean   @default(false) @map(\"is_featured\")\r\n\r\n  // Timestamps\r\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"products\")\r\n}\r\n\r\n/// Produkt-Varianten (z.B. verschiedene Gr√∂√üen)\r\nmodel ProductVariant {\r\n  id            String    @id @default(cuid())\r\n  productId     String    @map(\"product_id\")\r\n  product       Product   @relation(fields: [productId], references: [id], onDelete: Cascade)\r\n\r\n  sku           String    @unique\r\n  name          String    // z.B. \"Gr√∂√üe M\"\r\n  price         Decimal?  @db.Decimal(10, 2) // √úberschreibt Produktpreis wenn gesetzt\r\n  stock         Int       @default(0)\r\n\r\n  // Attribute\r\n  attributes    Json?     // z.B. { \"size\": \"M\", \"color\": \"rot\" }\r\n\r\n  // Timestamps\r\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"product_variants\")\r\n}\r\n\r\n/// Fahrzeug-Kompatibilit√§t f√ºr Produkte\r\nmodel VehicleCompatibility {\r\n  id            String    @id @default(cuid())\r\n  productId     String    @map(\"product_id\")\r\n  product       Product   @relation(fields: [productId], references: [id], onDelete: Cascade)\r\n\r\n  // Fahrzeugdaten\r\n  hsn           String?\r\n  tsn           String?\r\n  brand         String?\r\n  model         String?\r\n  yearFrom      Int?      @map(\"year_from\")\r\n  yearTo        Int?      @map(\"year_to\")\r\n\r\n  @@map(\"vehicle_compatibilities\")\r\n}\r\n\r\n/// Produktrelationen (Cross-Selling)\r\nmodel ProductRelation {\r\n  id            String    @id @default(cuid())\r\n  productId     String    @map(\"product_id\")\r\n  relatedId     String    @map(\"related_id\")\r\n  type          RelationType @default(RELATED)\r\n\r\n  product       Product   @relation(\"RelatedFrom\", fields: [productId], references: [id], onDelete: Cascade)\r\n  related       Product   @relation(\"RelatedTo\", fields: [relatedId], references: [id], onDelete: Cascade)\r\n\r\n  @@unique([productId, relatedId])\r\n  @@map(\"product_relations\")\r\n}\r\n\r\nenum RelationType {\r\n  RELATED           // √Ñhnliche Produkte\r\n  FREQUENTLY_BOUGHT // H√§ufig zusammen gekauft\r\n  ACCESSORY         // Zubeh√∂r\r\n}\r\n\r\n// =============================================================================\r\n// BESTELLUNGEN\r\n// =============================================================================\r\n\r\n/// Bestellungen\r\nmodel Order {\r\n  id                String      @id @default(cuid())\r\n  orderNumber       String      @unique @map(\"order_number\") // z.B. \"CV-2024-0001\"\r\n  userId            String?     @map(\"user_id\")\r\n  vehicleId         String?     @map(\"vehicle_id\")\r\n\r\n  // Adressen\r\n  shippingAddressId String?     @map(\"shipping_address_id\")\r\n  billingAddressId  String?     @map(\"billing_address_id\")\r\n\r\n  // Preise\r\n  subtotal          Decimal     @db.Decimal(10, 2)\r\n  shippingCost      Decimal     @default(0) @map(\"shipping_cost\") @db.Decimal(10, 2)\r\n  taxAmount         Decimal     @default(0) @map(\"tax_amount\") @db.Decimal(10, 2)\r\n  discount          Decimal     @default(0) @db.Decimal(10, 2)\r\n  total             Decimal     @db.Decimal(10, 2)\r\n\r\n  // Zahlung\r\n  paymentMethod     String?     @map(\"payment_method\")\r\n  paymentIntentId   String?     @unique @map(\"payment_intent_id\") // Stripe Payment Intent\r\n  paymentStatus     PaymentStatus @default(PENDING) @map(\"payment_status\")\r\n\r\n  // Status\r\n  status            OrderStatus @default(PENDING)\r\n\r\n  // Versand\r\n  shippingMethod    String?     @map(\"shipping_method\")\r\n  trackingNumber    String?     @map(\"tracking_number\")\r\n  shippedAt         DateTime?   @map(\"shipped_at\")\r\n  deliveredAt       DateTime?   @map(\"delivered_at\")\r\n\r\n  // Notizen\r\n  customerNote      String?     @map(\"customer_note\") @db.Text\r\n  internalNote      String?     @map(\"internal_note\") @db.Text\r\n\r\n  // Relationen\r\n  user              User?       @relation(fields: [userId], references: [id], onDelete: SetNull)\r\n  vehicle           Vehicle?    @relation(fields: [vehicleId], references: [id], onDelete: SetNull)\r\n  shippingAddress   Address?    @relation(\"ShippingAddress\", fields: [shippingAddressId], references: [id])\r\n  billingAddress    Address?    @relation(\"BillingAddress\", fields: [billingAddressId], references: [id])\r\n  items             OrderItem[]\r\n\r\n  // Timestamps\r\n  createdAt         DateTime    @default(now()) @map(\"created_at\")\r\n  updatedAt         DateTime    @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"orders\")\r\n}\r\n\r\n/// Bestellpositionen\r\nmodel OrderItem {\r\n  id            String    @id @default(cuid())\r\n  orderId       String    @map(\"order_id\")\r\n  productId     String?   @map(\"product_id\")\r\n\r\n  // Produktdaten (zum Zeitpunkt der Bestellung)\r\n  sku           String\r\n  name          String\r\n  price         Decimal   @db.Decimal(10, 2)\r\n  quantity      Int\r\n  total         Decimal   @db.Decimal(10, 2)\r\n\r\n  // Relationen\r\n  order         Order     @relation(fields: [orderId], references: [id], onDelete: Cascade)\r\n  product       Product?  @relation(fields: [productId], references: [id], onDelete: SetNull)\r\n\r\n  @@map(\"order_items\")\r\n}\r\n\r\nenum OrderStatus {\r\n  PENDING       // Ausstehend\r\n  PROCESSING    // In Bearbeitung\r\n  SHIPPED       // Versendet\r\n  DELIVERED     // Zugestellt\r\n  CANCELLED     // Storniert\r\n  REFUNDED      // Erstattet\r\n}\r\n\r\nenum PaymentStatus {\r\n  PENDING       // Ausstehend\r\n  PAID          // Bezahlt\r\n  FAILED        // Fehlgeschlagen\r\n  REFUNDED      // Erstattet\r\n}\r\n\r\n// =============================================================================\r\n// WERKSTATT-SERVICES (OpenCarBox)\r\n// =============================================================================\r\n\r\n/// Service-Kategorien\r\nmodel ServiceCategory {\r\n  id            String    @id @default(cuid())\r\n  name          String\r\n  slug          String    @unique\r\n  description   String?\r\n  image         String?\r\n  sortOrder     Int       @default(0) @map(\"sort_order\")\r\n\r\n  services      Service[]\r\n\r\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"service_categories\")\r\n}\r\n\r\n/// Werkstatt-Services\r\nmodel Service {\r\n  id            String    @id @default(cuid())\r\n  categoryId    String?   @map(\"category_id\")\r\n\r\n  name          String\r\n  slug          String    @unique\r\n  description   String?   @db.Text\r\n\r\n  // Preise\r\n  priceFrom     Decimal?  @map(\"price_from\") @db.Decimal(10, 2)\r\n  priceTo       Decimal?  @map(\"price_to\") @db.Decimal(10, 2)\r\n  priceType     PriceType @default(FIXED) @map(\"price_type\")\r\n\r\n  // Dauer\r\n  durationMinutes Int?    @map(\"duration_minutes\")\r\n\r\n  // Medien\r\n  image         String?\r\n\r\n  // Status\r\n  isActive      Boolean   @default(true) @map(\"is_active\")\r\n\r\n  // Relationen\r\n  category      ServiceCategory? @relation(fields: [categoryId], references: [id])\r\n  appointments  Appointment[]\r\n\r\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"services\")\r\n}\r\n\r\nenum PriceType {\r\n  FIXED         // Festpreis\r\n  FROM          // Ab-Preis\r\n  ON_REQUEST    // Auf Anfrage\r\n}\r\n\r\n/// Werkstatt-Termine\r\nmodel Appointment {\r\n  id            String    @id @default(cuid())\r\n  userId        String?   @map(\"user_id\")\r\n  vehicleId     String?   @map(\"vehicle_id\")\r\n  serviceId     String    @map(\"service_id\")\r\n\r\n  // Termin\r\n  date          DateTime\r\n  timeSlot      String    @map(\"time_slot\") // z.B. \"09:00-10:00\"\r\n\r\n  // Kontakt (falls nicht eingeloggt)\r\n  customerName  String?   @map(\"customer_name\")\r\n  customerEmail String?   @map(\"customer_email\")\r\n  customerPhone String?   @map(\"customer_phone\")\r\n\r\n  // Status\r\n  status        AppointmentStatus @default(PENDING)\r\n\r\n  // Notizen\r\n  customerNote  String?   @map(\"customer_note\") @db.Text\r\n  internalNote  String?   @map(\"internal_note\") @db.Text\r\n\r\n  // Relationen\r\n  user          User?     @relation(fields: [userId], references: [id], onDelete: SetNull)\r\n  vehicle       Vehicle?  @relation(fields: [vehicleId], references: [id], onDelete: SetNull)\r\n  service       Service   @relation(fields: [serviceId], references: [id])\r\n\r\n  // Timestamps\r\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"appointments\")\r\n}\r\n\r\nenum AppointmentStatus {\r\n  PENDING       // Anfrage\r\n  CONFIRMED     // Best√§tigt\r\n  IN_PROGRESS   // In Bearbeitung\r\n  COMPLETED     // Abgeschlossen\r\n  CANCELLED     // Abgesagt\r\n  NO_SHOW       // Nicht erschienen\r\n}\r\n\r\n// =============================================================================\r\n// BEWERTUNGEN\r\n// =============================================================================\r\n\r\n/// Produkt- und Service-Bewertungen\r\nmodel Review {\r\n  id            String    @id @default(cuid())\r\n  userId        String    @map(\"user_id\")\r\n  productId     String?   @map(\"product_id\")\r\n\r\n  // Bewertung\r\n  rating        Int       // 1-5\r\n  title         String?\r\n  content       String?   @db.Text\r\n\r\n  // Status\r\n  isVerified    Boolean   @default(false) @map(\"is_verified\") // Verifizierter Kauf\r\n  isApproved    Boolean   @default(false) @map(\"is_approved\")\r\n\r\n  // Relationen\r\n  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)\r\n  product       Product?  @relation(fields: [productId], references: [id], onDelete: Cascade)\r\n\r\n  // Timestamps\r\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\r\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"reviews\")\r\n}\r\n\r\n// =============================================================================\r\n// AGENTIC OS (Nexify Core)\r\n// =============================================================================\r\n\r\n/// Projekt-Ged√§chtnis (Wissen & Best Practices)\r\nmodel ProjectMemory {\r\n  id              String   @id @default(cuid())\r\n  type            String   // BEST_PRACTICE, ANTIPATTERN, KNOWLEDGE, TODO\r\n  category        String   // e.g., 'API', 'UI', 'DATABASE', 'SECURITY'\r\n  title           String\r\n  content         String   @db.Text\r\n  metadata        Json?    @default(\"{}\")\r\n  tags            String[] @default([])\r\n  confidenceScore Float?   @default(1.0) @map(\"confidence_score\")\r\n\r\n  createdAt       DateTime @default(now()) @map(\"created_at\")\r\n  updatedAt       DateTime @updatedAt @map(\"updated_at\")\r\n\r\n  @@map(\"project_memory\")\r\n}\r\n\r\n/// Audit-Logs (Handlungs-Protokoll des Agenten)\r\nmodel AuditLog {\r\n  id           String   @id @default(cuid())\r\n  agentId      String   @default(\"cline-nexify-agent\") @map(\"agent_id\")\r\n  action       String\r\n  resource     String\r\n  details      Json?    @default(\"{}\")\r\n  status       String   // SUCCESS, FAILURE, WARNING\r\n  errorMessage String?  @map(\"error_message\")\r\n  stackTrace   String?  @map(\"stack_trace\")\r\n  durationMs   Int?     @map(\"duration_ms\")\r\n\r\n  createdAt    DateTime @default(now()) @map(\"created_at\")\r\n\r\n  @@map(\"audit_logs\")\r\n}\r\n",
  "recentMemories": "",
  "pendingTasks": []
}