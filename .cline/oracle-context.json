{
  "lastUpdated": "2026-01-01T16:00:12.107Z",
  "rules": "",
  "specs": "# OpenCarBox & Carvantooo - System-Spezifikation\n\n> **GESETZBUCH** - Dieses Dokument ist die zentrale Wahrheitsquelle f√ºr das gesamte Projekt.\n> Alle Entscheidungen, Implementierungen und Dokumentationen m√ºssen hiermit konform sein.\n\n**Version:** 1.0.0  \n**Erstellt:** 2024-12-05  \n**Zuletzt aktualisiert:** 2024-12-05\n\n---\n\n## üéØ 1. Projekt-Kern\n\n### 1.1 Mission\n\nEntwicklung einer hochprofessionellen Multisite E-Commerce Plattform f√ºr die OpenCarBox GmbH, die als Showcase-Projekt f√ºr Folgeauftr√§ge dient und h√∂chste Qualit√§tsstandards erf√ºllt.\n\n### 1.2 Kunde\n\n| Feld | Wert |\n|------|------|\n| **Firma** | OpenCarBox GmbH |\n| **Gesch√§ftsf√ºhrer** | Herr Arac Metehan |\n| **Adresse** | Rennweg 76, 1030 Wien, √ñsterreich |\n| **Firmenbuch-Nr.** | FN 534799 w |\n| **UID-Nummer** | ATU75630015 |\n| **Rechtsform** | GmbH |\n\n### 1.3 Rechtsraum & Compliance\n\n- **Prim√§r:** √ñsterreich\n- **Sekund√§r:** Deutschland, EU\n- **DSGVO:** Vollst√§ndig konform\n- **Server-Standort:** EU (Vercel EU oder AWS Frankfurt)\n- **Impressumspflicht:** Ja (√∂sterreichisches Recht)\n- **Schreibweisen:** DIN 5008 f√ºr alle deutschen Texte\n\n---\n\n## üè∑Ô∏è 2. Markenarchitektur\n\n### 2.1 Markenstruktur\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                    OPENCARBOX GMBH                          ‚îÇ\n‚îÇ                   (Dachmarke/Firma)                         ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ                                                             ‚îÇ\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ    ‚îÇ                             ‚îÇ‚îÇ\n‚îÇ  ‚îÇ    CARVANTOOO       ‚îÇ    ‚îÇ  OPENCARBOX by Carvantooo   ‚îÇ‚îÇ\n‚îÇ  ‚îÇ    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê      ‚îÇ    ‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê   ‚îÇ‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ    ‚îÇ                             ‚îÇ‚îÇ\n‚îÇ  ‚îÇ    Onlineshop       ‚îÇ    ‚îÇ  Werkstatt + Autohandel     ‚îÇ‚îÇ\n‚îÇ  ‚îÇ    (Rot-Akzent)     ‚îÇ    ‚îÇ  (Blau-Akzent)              ‚îÇ‚îÇ\n‚îÇ  ‚îÇ                     ‚îÇ    ‚îÇ                             ‚îÇ‚îÇ\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ\n‚îÇ                                                             ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### 2.2 Marken-Details\n\n| Marke | Bereich | Claim | Prim√§rfarbe | Charakter |\n|-------|---------|-------|-------------|-----------|\n| **Carvantooo** | Onlineshop | \"With Carvantooo Parts, Your Car Drives Better\" | Rot `#E53E3E` | Dynamisch, Action, E-Commerce |\n| **OpenCarBox** | Werkstatt | \"Weil das Auto zur Familie geh√∂rt\" | Blau `#3182CE` | Vertrauen, Familie, Service |\n| **OpenCarBox** | Autohandel | \"Ihr Traumauto wartet\" | Blau `#3182CE` | Professionell, Beratung |\n\n### 2.3 Logo-Verwendung\n\n- **Header:** OpenCarBox Logo (Hauptmarke) + \"powered by Carvantooo\" (Subline)\n- **Shop-Bereich:** Carvantooo Logo prominent\n- **Werkstatt/Autohandel:** OpenCarBox Logo mit \"by Carvantooo\" Badge\n- **Footer:** Beide Logos mit Erkl√§rung der Markenverbindung\n- **Favicon:** Kombiniertes Symbol (O+C)\n\n---\n\n## üé® 3. Design-System\n\n### 3.1 Design-Philosophie\n\n**\"Automotive Premium\"** - Hochwertig, technisch, aber warm und zug√§nglich.\n\n**Inspirationen:**\n- Porsche Design System (Pr√§zision)\n- Tesla Shop (Modernit√§t)\n- BMW Konfigurator (Premium-Feeling)\n- Apple Store (Klarheit)\n\n**Kernprinzipien:**\n1. **Pr√§zision:** Pixel-perfekte Ausrichtungen, mathematisches 8px Grid\n2. **Tiefe:** Subtile Schatten, Glassmorphism, Layering\n3. **Bewegung:** Purposeful Animations (nicht dekorativ)\n4. **Kontrast:** Starke visuelle Hierarchie\n5. **Wei√üraum:** Gro√üz√ºgig, Luxus-Gef√ºhl\n\n### 3.2 Farbpalette\n\n#### Carvantooo (Shop) - Rot-Spektrum\n```css\n--carvantooo-50:  #FFF5F5;   /* Hintergrund subtle */\n--carvantooo-100: #FED7D7;   /* Hintergrund light */\n--carvantooo-200: #FEB2B2;   /* Border light */\n--carvantooo-300: #FC8181;   /* Text subtle */\n--carvantooo-400: #F56565;   /* Icon default */\n--carvantooo-500: #E53E3E;   /* ‚úì Primary default */\n--carvantooo-600: #C53030;   /* Primary hover */\n--carvantooo-700: #9B2C2C;   /* Primary active */\n--carvantooo-800: #822727;   /* Text dark */\n--carvantooo-900: #63171B;   /* Text darkest */\n--carvantooo-glow: rgba(229, 62, 62, 0.4);\n--carvantooo-gradient: linear-gradient(135deg, #E53E3E 0%, #9B2C2C 100%);\n```\n\n#### OpenCarBox (Services) - Blau-Spektrum\n```css\n--opencarbox-50:  #EBF8FF;\n--opencarbox-100: #BEE3F8;\n--opencarbox-200: #90CDF4;\n--opencarbox-300: #63B3ED;\n--opencarbox-400: #4299E1;\n--opencarbox-500: #3182CE;   /* ‚úì Primary default */\n--opencarbox-600: #2B6CB0;   /* Primary hover */\n--opencarbox-700: #2C5282;   /* Primary active */\n--opencarbox-800: #2A4365;   /* Text dark */\n--opencarbox-900: #1A365D;   /* Text darkest */\n--opencarbox-glow: rgba(49, 130, 206, 0.4);\n--opencarbox-gradient: linear-gradient(135deg, #3182CE 0%, #1A365D 100%);\n```\n\n#### Neutrale Palette\n```css\n--slate-50:  #F8FAFC;   /* Page Background */\n--slate-100: #F1F5F9;   /* Card Background */\n--slate-200: #E2E8F0;   /* Border */\n--slate-300: #CBD5E1;   /* Border hover */\n--slate-400: #94A3B8;   /* Placeholder */\n--slate-500: #64748B;   /* Text muted */\n--slate-600: #475569;   /* Text secondary */\n--slate-700: #334155;   /* Text primary */\n--slate-800: #1E293B;   /* Headings */\n--slate-900: #0F172A;   /* Display text */\n--slate-950: #020617;   /* Dark mode bg */\n```\n\n#### Status-Farben\n```css\n--success: #10B981;   /* Emerald 500 */\n--warning: #F59E0B;   /* Amber 500 */\n--error:   #EF4444;   /* Red 500 */\n--info:    #3B82F6;   /* Blue 500 */\n```\n\n### 3.3 Typografie\n\n#### Font-Stack\n```css\n--font-display: 'Plus Jakarta Sans', system-ui, sans-serif;\n--font-body: 'Inter', system-ui, sans-serif;\n--font-mono: 'JetBrains Mono', 'Fira Code', monospace;\n```\n\n#### Typografie-Skala (Fluid)\n```css\n--text-xs:   clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);    /* 12-14px */\n--text-sm:   clamp(0.875rem, 0.8rem + 0.375vw, 1rem);      /* 14-16px */\n--text-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);        /* 16-18px */\n--text-lg:   clamp(1.125rem, 1rem + 0.625vw, 1.25rem);     /* 18-20px */\n--text-xl:   clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);      /* 20-24px */\n--text-2xl:  clamp(1.5rem, 1.25rem + 1.25vw, 2rem);        /* 24-32px */\n--text-3xl:  clamp(1.875rem, 1.5rem + 1.875vw, 2.5rem);    /* 30-40px */\n--text-4xl:  clamp(2.25rem, 1.75rem + 2.5vw, 3rem);        /* 36-48px */\n--text-5xl:  clamp(3rem, 2rem + 5vw, 4.5rem);              /* 48-72px */\n--text-hero: clamp(3.5rem, 2.5rem + 5vw, 6rem);            /* 56-96px */\n```\n\n### 3.4 Spacing-System (8px Grid)\n\n```css\n--space-0:  0;\n--space-1:  0.25rem;   /* 4px */\n--space-2:  0.5rem;    /* 8px */\n--space-3:  0.75rem;   /* 12px */\n--space-4:  1rem;      /* 16px */\n--space-5:  1.25rem;   /* 20px */\n--space-6:  1.5rem;    /* 24px */\n--space-8:  2rem;      /* 32px */\n--space-10: 2.5rem;    /* 40px */\n--space-12: 3rem;      /* 48px */\n--space-16: 4rem;      /* 64px */\n--space-20: 5rem;      /* 80px */\n--space-24: 6rem;      /* 96px */\n--space-32: 8rem;      /* 128px */\n```\n\n### 3.5 Breakpoints (Mobile-First)\n\n```css\n--screen-xs:  475px;   /* Large phones */\n--screen-sm:  640px;   /* Small tablets */\n--screen-md:  768px;   /* Tablets */\n--screen-lg:  1024px;  /* Small laptops */\n--screen-xl:  1280px;  /* Desktops */\n--screen-2xl: 1536px;  /* Large screens */\n--screen-3xl: 1920px;  /* Ultra-wide */\n```\n\n### 3.6 Schatten-System\n\n```css\n--shadow-xs:  0 1px 2px 0 rgb(0 0 0 / 0.05);\n--shadow-sm:  0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n--shadow-md:  0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n--shadow-lg:  0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n--shadow-xl:  0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n--shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n--shadow-glow-red:  0 0 20px var(--carvantooo-glow);\n--shadow-glow-blue: 0 0 20px var(--opencarbox-glow);\n```\n\n### 3.7 Border-Radius\n\n```css\n--radius-none: 0;\n--radius-sm:   0.125rem;  /* 2px */\n--radius-md:   0.375rem;  /* 6px */\n--radius-lg:   0.5rem;    /* 8px */\n--radius-xl:   0.75rem;   /* 12px */\n--radius-2xl:  1rem;      /* 16px */\n--radius-3xl:  1.5rem;    /* 24px */\n--radius-full: 9999px;\n```\n\n---\n\n## üõ†Ô∏è 4. Technologie-Stack\n\n### 4.1 Frontend\n\n| Technologie | Version | Zweck |\n|-------------|---------|-------|\n| Next.js | 14+ | Framework (App Router) |\n| TypeScript | 5+ | Typisierung (strict mode) |\n| Tailwind CSS | 3+ | Styling |\n| shadcn/ui | Latest | UI-Komponenten-Basis |\n| Radix UI | Latest | Headless Primitives |\n| Framer Motion | Latest | Animationen |\n| Zustand | Latest | Client State |\n| TanStack Query | Latest | Server State |\n| React Hook Form | Latest | Formulare |\n| Zod | Latest | Validierung |\n\n### 4.2 Backend\n\n| Technologie | Version | Zweck |\n|-------------|---------|-------|\n| Next.js API Routes | - | API Layer |\n| Server Actions | - | Mutations |\n| Prisma | Latest | ORM |\n| Supabase | Latest | PostgreSQL + Auth + Storage |\n\n### 4.3 Integrationen\n\n| Integration | Zweck |\n|-------------|-------|\n| Stripe | Zahlungsabwicklung |\n| Meilisearch | Produktsuche |\n| Botpress | Chatbot |\n| WhatsApp Business API | Kundenkommunikation |\n| React Email + Resend | E-Mail-Versand |\n| TecDoc API | HSN/TSN Fahrzeugdaten |\n\n### 4.4 DevOps\n\n| Tool | Zweck |\n|------|-------|\n| Vercel | Hosting & Deployment |\n| GitHub Actions | CI/CD |\n| Sentry | Error Tracking |\n| Vitest | Unit Tests |\n| Playwright | E2E Tests |\n\n---\n\n## üìÅ 5. Projekt-Struktur\n\n```\nopencarbox/\n‚îú‚îÄ‚îÄ .cursorrules                    # AI-Agenten-Konfiguration (JSON)\n‚îú‚îÄ‚îÄ .github/\n‚îÇ   ‚îî‚îÄ‚îÄ workflows/\n‚îÇ       ‚îú‚îÄ‚îÄ ai-review.yml           # AI Code Review\n‚îÇ       ‚îú‚îÄ‚îÄ ci.yml                  # Continuous Integration\n‚îÇ       ‚îî‚îÄ‚îÄ deploy.yml              # Deployment\n‚îú‚îÄ‚îÄ docs/                           # System-Wiki (DIN-konform)\n‚îÇ   ‚îú‚îÄ‚îÄ architecture/               # Architektur-Dokumentation\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ system-overview.md\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data-flow.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ diagrams/               # Mermaid Diagramme\n‚îÇ   ‚îú‚îÄ‚îÄ api/                        # API-Dokumentation\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ endpoints.md\n‚îÇ   ‚îú‚îÄ‚îÄ changelog/                  # √Ñnderungshistorie\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CHANGELOG.md\n‚îÇ   ‚îú‚îÄ‚îÄ components/                 # Komponenten-Dokumentation\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.md\n‚îÇ   ‚îú‚îÄ‚îÄ design-system/              # Design-System-Docs\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ colors.md\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ typography.md\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ spacing.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components.md\n‚îÇ   ‚îî‚îÄ‚îÄ tasks/                      # Aufgaben-Management\n‚îÇ       ‚îî‚îÄ‚îÄ master_plan.md\n‚îú‚îÄ‚îÄ prisma/\n‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma               # Datenbank-Schema\n‚îÇ   ‚îú‚îÄ‚îÄ migrations/                 # DB Migrations\n‚îÇ   ‚îî‚îÄ‚îÄ seed.ts                     # Testdaten\n‚îú‚îÄ‚îÄ public/\n‚îÇ   ‚îú‚îÄ‚îÄ fonts/                      # Custom Fonts\n‚îÇ   ‚îú‚îÄ‚îÄ images/                     # Statische Bilder\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logos/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hero/\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ products/\n‚îÇ   ‚îî‚îÄ‚îÄ icons/                      # Custom Icons\n‚îú‚îÄ‚îÄ scripts/\n‚îÇ   ‚îú‚îÄ‚îÄ sync-docs-to-rules.ts       # Auto-Sync Docs ‚Üí .cursorrules\n‚îÇ   ‚îî‚îÄ‚îÄ quality-gate.ts             # Qualit√§ts-Checks\n‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îú‚îÄ‚îÄ app/                        # Next.js App Router\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (marketing)/            # Landing, About, etc.\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (werkstatt)/            # OpenCarBox Werkstatt\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (autohandel)/           # OpenCarBox Autohandel\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (shop)/                 # Carvantooo Shop\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/                  # Admin Panel\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                    # API Routes\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx              # Root Layout\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                # Homepage\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css             # Global Styles\n‚îÇ   ‚îú‚îÄ‚îÄ components/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                     # Basis UI (shadcn/ui)\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/                 # Header, Footer, Nav\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shared/                 # √úbergreifende Komponenten\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shop/                   # Shop-spezifisch\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ werkstatt/              # Werkstatt-spezifisch\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ autohandel/             # Autohandel-spezifisch\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat/                   # Chat/WhatsApp\n‚îÇ   ‚îú‚îÄ‚îÄ hooks/                      # Custom React Hooks\n‚îÇ   ‚îú‚îÄ‚îÄ lib/                        # Utilities & Clients\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.ts                   # Prisma Client\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stripe.ts               # Stripe Client\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ meilisearch.ts          # Search Client\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ whatsapp.ts             # WhatsApp API\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email.ts                # Email Client\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hsn-tsn.ts              # Fahrzeugsuche\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts                # Utility Functions\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.ts           # Zod Schemas\n‚îÇ   ‚îú‚îÄ‚îÄ stores/                     # Zustand Stores\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.ts                 # Warenkorb\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ garage.ts               # Meine Garage\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui.ts                   # UI State\n‚îÇ   ‚îî‚îÄ‚îÄ types/                      # TypeScript Types\n‚îÇ       ‚îú‚îÄ‚îÄ index.ts\n‚îÇ       ‚îú‚îÄ‚îÄ product.ts\n‚îÇ       ‚îú‚îÄ‚îÄ order.ts\n‚îÇ       ‚îú‚îÄ‚îÄ vehicle.ts\n‚îÇ       ‚îî‚îÄ‚îÄ service.ts\n‚îú‚îÄ‚îÄ tests/\n‚îÇ   ‚îú‚îÄ‚îÄ unit/                       # Unit Tests\n‚îÇ   ‚îú‚îÄ‚îÄ integration/                # Integration Tests\n‚îÇ   ‚îî‚îÄ‚îÄ e2e/                        # E2E Tests (Playwright)\n‚îú‚îÄ‚îÄ .env.example                    # Umgebungsvariablen Vorlage\n‚îú‚îÄ‚îÄ .eslintrc.json                  # ESLint Config\n‚îú‚îÄ‚îÄ .prettierrc                     # Prettier Config\n‚îú‚îÄ‚îÄ components.json                 # shadcn/ui Config\n‚îú‚îÄ‚îÄ next.config.js                  # Next.js Config\n‚îú‚îÄ‚îÄ package.json                    # Dependencies\n‚îú‚îÄ‚îÄ postcss.config.js               # PostCSS Config\n‚îú‚îÄ‚îÄ project_specs.md                # DIESES DOKUMENT\n‚îú‚îÄ‚îÄ tailwind.config.ts              # Tailwind Config\n‚îú‚îÄ‚îÄ tsconfig.json                   # TypeScript Config\n‚îî‚îÄ‚îÄ _scaffold_log.md                # Erstellungsprotokoll\n```\n\n---\n\n## üìã 6. Coding-Standards\n\n### 6.1 Sprach-Konventionen\n\n| Bereich | Sprache | Beispiel |\n|---------|---------|----------|\n| Variablen, Funktionen | Englisch | `getUserById()`, `isLoading` |\n| Klassen, Types | Englisch | `ProductCard`, `OrderStatus` |\n| Kommentare | Deutsch | `// Berechnet den Gesamtpreis inkl. MwSt.` |\n| JSDoc | Deutsch | `@param preis - Der Nettopreis in Euro` |\n| UI-Texte | Deutsch | \"In den Warenkorb\", \"Jetzt buchen\" |\n| URLs/Slugs | Deutsch | `/werkstatt/terminbuchung`, `/produkte/bremsbelaege` |\n| Dokumentation | Deutsch | Alle .md Dateien |\n\n### 6.2 Code-Regeln\n\n```typescript\n// ‚úì RICHTIG\n/**\n * Berechnet den Gesamtpreis inklusive Mehrwertsteuer.\n * @param netPrice - Der Nettopreis in Euro\n * @param vatRate - Der MwSt.-Satz (Standard: 0.20 f√ºr AT)\n * @returns Der Bruttopreis in Euro\n */\nexport function calculateGrossPrice(netPrice: number, vatRate: number = 0.20): number {\n  return netPrice * (1 + vatRate);\n}\n\n// ‚úó FALSCH - Kein console.log, keine any-Types, keine fehlende Doku\nexport function calc(p: any) {\n  console.log(p);\n  return p * 1.2;\n}\n```\n\n### 6.3 Komponenten-Standard\n\n```tsx\n// ‚úì RICHTIG - Vollst√§ndig typisierte Komponente mit Dokumentation\nimport { type FC } from 'react';\nimport { cn } from '@/lib/utils';\n\n/**\n * Props f√ºr die Button-Komponente\n */\ninterface ButtonProps {\n  /** Der anzuzeigende Text */\n  children: React.ReactNode;\n  /** Die Variante des Buttons */\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\n  /** Die Gr√∂√üe des Buttons */\n  size?: 'sm' | 'md' | 'lg';\n  /** Ist der Button deaktiviert? */\n  disabled?: boolean;\n  /** Click-Handler */\n  onClick?: () => void;\n  /** Zus√§tzliche CSS-Klassen */\n  className?: string;\n}\n\n/**\n * Prim√§rer Button f√ºr Aktionen.\n * Verwendet das Carvantooo Rot f√ºr Shop-Aktionen\n * und OpenCarBox Blau f√ºr Service-Aktionen.\n */\nexport const Button: FC<ButtonProps> = ({\n  children,\n  variant = 'primary',\n  size = 'md',\n  disabled = false,\n  onClick,\n  className,\n}) => {\n  return (\n    <button\n      type=\"button\"\n      disabled={disabled}\n      onClick={onClick}\n      className={cn(\n        'inline-flex items-center justify-center font-medium transition-all',\n        'focus-visible:outline-none focus-visible:ring-2',\n        // Varianten...\n        className\n      )}\n    >\n      {children}\n    </button>\n  );\n};\n```\n\n---\n\n## üîÑ 7. Workflow-Regeln\n\n### 7.1 Vor JEDEM Task\n\n1. **Lade Kontext:**\n   - `project_specs.md` (dieses Dokument)\n   - `/docs/tasks/master_plan.md`\n   - `.cursorrules`\n\n2. **Analysiere IST-Situation:**\n   - Bestehender Code im betroffenen Bereich\n   - Abh√§ngigkeiten zu anderen Komponenten\n   - Offene Tasks und deren Status\n\n3. **Verstehe SOLL-Zustand:**\n   - Was ist das Ziel des Tasks?\n   - Welche Anforderungen m√ºssen erf√ºllt werden?\n   - Welche Zusammenh√§nge bestehen?\n\n4. **Plane Umsetzung:**\n   - Effizientester Weg\n   - Wiederverwendung existierender Patterns\n   - Ber√ºcksichtigung aller Vorgaben\n\n### 7.2 W√§hrend der Umsetzung\n\n- Strikte TypeScript-Typisierung\n- Wiederverwendbare Komponenten (DRY)\n- Fehler sofort fixen\n- Tests schreiben\n- Accessibility beachten\n\n### 7.3 Nach JEDEM Task\n\n1. Dokumentation in `/docs` aktualisieren\n2. Changelog-Eintrag erstellen\n3. Task-Status in `master_plan.md` updaten\n4. `npm run sync-rules` ausf√ºhren\n5. Selbst-Reflektion durchf√ºhren\n\n---\n\n## üö´ 8. Verbotene Praktiken\n\n- ‚ùå `console.log` in Production Code\n- ‚ùå `any` Type in TypeScript (au√üer absolut notwendig)\n- ‚ùå Hardcodierte Secrets oder API-Keys\n- ‚ùå Code ohne Dokumentation\n- ‚ùå Komponenten ohne TypeScript Props\n- ‚ùå Ignorieren von Linter-Fehlern\n- ‚ùå TODOs ohne Timeline\n- ‚ùå R√ºckfragen bei trivialen Entscheidungen\n- ‚ùå Code-Duplikation\n- ‚ùå Inline-Styles (au√üer dynamische Werte)\n\n---\n\n## üìñ 9. Referenzen\n\n- **Design System:** `/docs/design-system/`\n- **API Dokumentation:** `/docs/api/`\n- **Komponenten:** `/docs/components/`\n- **Architektur:** `/docs/architecture/`\n- **Changelog:** `/docs/changelog/CHANGELOG.md`\n- **Master Plan:** `/docs/tasks/master_plan.md`\n\n---\n\n**Dieses Dokument ist verbindlich f√ºr alle Entwicklungsarbeiten.**\n\n",
  "schema": "// =============================================================================\n// Prisma Schema - OpenCarBox & Carvantooo\n// =============================================================================\n// Datenbank-Schema f√ºr die Multisite-Plattform\n// @see docs/architecture/system-overview.md\n// =============================================================================\n\ngenerator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider  = \"postgresql\"\n  url       = env(\"DATABASE_URL\")\n  directUrl = env(\"DIRECT_URL\") // F√ºr Supabase Connection Pooling\n}\n\n// =============================================================================\n// NEXIFY ORACLE & MEMORY SYSTEM\n// =============================================================================\n\n/// Project Memory - Langzeitged√§chtnis f√ºr Patterns & Erkenntnisse\nmodel ProjectMemory {\n  id          String   @id @default(cuid())\n  type        String   // BEST_PRACTICE | ANTIPATTERN | KNOWLEDGE | TODO\n  category    String   // z.B. \"supabase\", \"stripe\", \"api\"\n  title       String\n  content     String   @db.Text\n  metadata    Json?    // Flexible zus√§tzliche Daten\n  tags        String[] // F√ºr Suche\n\n  createdAt   DateTime @default(now()) @map(\"created_at\")\n  updatedAt   DateTime @updatedAt @map(\"updated_at\")\n\n  @@map(\"project_memory\")\n  @@index([type])\n  @@index([category])\n  @@index([tags])\n}\n\n/// Audit Logs - Protokoll aller Agent-Aktionen\nmodel AuditLog {\n  id            String   @id @default(cuid())\n  action        String   // z.B. \"create_component\", \"fix_bug\"\n  resource      String   // Betroffene Datei/Ressource\n  status        String   // SUCCESS | FAILURE | WARNING\n  details       Json?    // Zus√§tzliche Informationen\n  errorMessage  String?  @map(\"error_message\") @db.Text\n  stackTrace    String?  @map(\"stack_trace\") @db.Text\n  durationMs    Int?     @map(\"duration_ms\")\n\n  createdAt     DateTime @default(now()) @map(\"created_at\")\n\n  @@map(\"audit_logs\")\n  @@index([action])\n  @@index([status])\n  @@index([createdAt])\n}\n\n// =============================================================================\n// BENUTZER & AUTHENTIFIZIERUNG\n// =============================================================================\n\n/// Benutzer der Plattform (Kunden, Mitarbeiter, Admins)\nmodel User {\n  id            String    @id @default(cuid())\n  email         String    @unique\n  emailVerified DateTime? @map(\"email_verified\")\n  name          String?\n  phone         String?\n  image         String?\n  role          UserRole  @default(CUSTOMER)\n\n  // Relationen\n  addresses     Address[]\n  vehicles      Vehicle[]\n  orders        Order[]\n  appointments  Appointment[]\n  reviews       Review[]\n\n  // Timestamps\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  @@map(\"users\")\n}\n\n/// Benutzerrollen\nenum UserRole {\n  CUSTOMER      // Kunde\n  EMPLOYEE      // Mitarbeiter\n  ADMIN         // Administrator\n}\n\n/// Adressen (Liefer- und Rechnungsadressen)\nmodel Address {\n  id            String      @id @default(cuid())\n  userId        String      @map(\"user_id\")\n  type          AddressType @default(SHIPPING)\n\n  // Adressfelder\n  firstName     String      @map(\"first_name\")\n  lastName      String      @map(\"last_name\")\n  company       String?\n  street        String\n  streetNumber  String      @map(\"street_number\")\n  addressLine2  String?     @map(\"address_line_2\")\n  postalCode    String      @map(\"postal_code\")\n  city          String\n  country       String      @default(\"AT\")\n\n  isDefault     Boolean     @default(false) @map(\"is_default\")\n\n  // Relationen\n  user          User        @relation(fields: [userId], references: [id], onDelete: Cascade)\n  ordersShipping Order[]    @relation(\"ShippingAddress\")\n  ordersBilling  Order[]    @relation(\"BillingAddress\")\n\n  // Timestamps\n  createdAt     DateTime    @default(now()) @map(\"created_at\")\n  updatedAt     DateTime    @updatedAt @map(\"updated_at\")\n\n  @@map(\"addresses\")\n}\n\nenum AddressType {\n  SHIPPING\n  BILLING\n}\n\n// =============================================================================\n// FAHRZEUGE (Meine Garage)\n// =============================================================================\n\n/// Gespeicherte Fahrzeuge eines Benutzers\nmodel Vehicle {\n  id            String    @id @default(cuid())\n  userId        String?   @map(\"user_id\")\n\n  // Fahrzeugdaten\n  hsn           String?   // Herstellerschl√ºsselnummer (4-stellig)\n  tsn           String?   // Typschl√ºsselnummer (3-stellig)\n  licensePlate  String?   @map(\"license_plate\") // Kennzeichen\n  vin           String?   // Fahrgestellnummer\n\n  brand         String    // Marke (z.B. \"Volkswagen\")\n  model         String    // Modell (z.B. \"Golf\")\n  variant       String?   // Variante (z.B. \"VII GTI\")\n  year          Int       // Baujahr\n\n  // Zus√§tzliche Infos\n  nickname      String?   // Benutzerdefinierter Name\n  mileage       Int?      // Kilometerstand\n  lastService   DateTime? @map(\"last_service\")\n  nextTuv       DateTime? @map(\"next_tuv\") // N√§chste HU/AU\n\n  // Relationen\n  user          User?     @relation(fields: [userId], references: [id], onDelete: SetNull)\n  orders        Order[]\n  appointments  Appointment[]\n\n  // Timestamps\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  @@map(\"vehicles\")\n}\n\n// =============================================================================\n// PRODUKTE (Carvantooo Shop)\n// =============================================================================\n\n/// Produktkategorien\nmodel Category {\n  id            String     @id @default(cuid())\n  name          String\n  slug          String     @unique\n  description   String?\n  image         String?\n\n  // Hierarchie\n  parentId      String?    @map(\"parent_id\")\n  parent        Category?  @relation(\"CategoryHierarchy\", fields: [parentId], references: [id])\n  children      Category[] @relation(\"CategoryHierarchy\")\n\n  // Relationen\n  products      Product[]\n\n  // SEO\n  metaTitle     String?    @map(\"meta_title\")\n  metaDescription String?  @map(\"meta_description\")\n\n  // Sortierung\n  sortOrder     Int        @default(0) @map(\"sort_order\")\n  isActive      Boolean    @default(true) @map(\"is_active\")\n\n  // Timestamps\n  createdAt     DateTime   @default(now()) @map(\"created_at\")\n  updatedAt     DateTime   @updatedAt @map(\"updated_at\")\n\n  @@map(\"categories\")\n}\n\n/// Produkte im Shop\nmodel Product {\n  id            String    @id @default(cuid())\n  sku           String    @unique // Artikelnummer\n  name          String\n  slug          String    @unique\n  description   String?   @db.Text\n\n  // Preise\n  price         Decimal   @db.Decimal(10, 2)\n  comparePrice  Decimal?  @map(\"compare_price\") @db.Decimal(10, 2) // UVP/Streichpreis\n  costPrice     Decimal?  @map(\"cost_price\") @db.Decimal(10, 2) // Einkaufspreis\n\n  // Lager\n  stock         Int       @default(0)\n  lowStockAlert Int       @default(5) @map(\"low_stock_alert\")\n  trackStock    Boolean   @default(true) @map(\"track_stock\")\n\n  // Medien\n  images        String[]  // Array von Bild-URLs\n\n  // Kategorisierung\n  categoryId    String?   @map(\"category_id\")\n  category      Category? @relation(fields: [categoryId], references: [id])\n  brand         String?   // Hersteller/Marke\n\n  // Fahrzeug-Kompatibilit√§t\n  compatibleVehicles VehicleCompatibility[]\n\n  // Varianten (z.B. Gr√∂√üen)\n  variants      ProductVariant[]\n\n  // Relationen\n  orderItems    OrderItem[]\n  reviews       Review[]\n  relatedFrom   ProductRelation[] @relation(\"RelatedFrom\")\n  relatedTo     ProductRelation[] @relation(\"RelatedTo\")\n\n  // SEO\n  metaTitle     String?   @map(\"meta_title\")\n  metaDescription String? @map(\"meta_description\")\n\n  // Status\n  isActive      Boolean   @default(true) @map(\"is_active\")\n  isFeatured    Boolean   @default(false) @map(\"is_featured\")\n\n  // Timestamps\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  @@map(\"products\")\n}\n\n/// Produkt-Varianten (z.B. verschiedene Gr√∂√üen)\nmodel ProductVariant {\n  id            String    @id @default(cuid())\n  productId     String    @map(\"product_id\")\n  product       Product   @relation(fields: [productId], references: [id], onDelete: Cascade)\n\n  sku           String    @unique\n  name          String    // z.B. \"Gr√∂√üe M\"\n  price         Decimal?  @db.Decimal(10, 2) // √úberschreibt Produktpreis wenn gesetzt\n  stock         Int       @default(0)\n\n  // Attribute\n  attributes    Json?     // z.B. { \"size\": \"M\", \"color\": \"rot\" }\n\n  // Timestamps\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  @@map(\"product_variants\")\n}\n\n/// Fahrzeug-Kompatibilit√§t f√ºr Produkte\nmodel VehicleCompatibility {\n  id            String    @id @default(cuid())\n  productId     String    @map(\"product_id\")\n  product       Product   @relation(fields: [productId], references: [id], onDelete: Cascade)\n\n  // Fahrzeugdaten\n  hsn           String?\n  tsn           String?\n  brand         String?\n  model         String?\n  yearFrom      Int?      @map(\"year_from\")\n  yearTo        Int?      @map(\"year_to\")\n\n  @@map(\"vehicle_compatibilities\")\n}\n\n/// Produktrelationen (Cross-Selling)\nmodel ProductRelation {\n  id            String    @id @default(cuid())\n  productId     String    @map(\"product_id\")\n  relatedId     String    @map(\"related_id\")\n  type          RelationType @default(RELATED)\n\n  product       Product   @relation(\"RelatedFrom\", fields: [productId], references: [id], onDelete: Cascade)\n  related       Product   @relation(\"RelatedTo\", fields: [relatedId], references: [id], onDelete: Cascade)\n\n  @@unique([productId, relatedId])\n  @@map(\"product_relations\")\n}\n\nenum RelationType {\n  RELATED           // √Ñhnliche Produkte\n  FREQUENTLY_BOUGHT // H√§ufig zusammen gekauft\n  ACCESSORY         // Zubeh√∂r\n}\n\n// =============================================================================\n// BESTELLUNGEN\n// =============================================================================\n\n/// Bestellungen\nmodel Order {\n  id                String      @id @default(cuid())\n  orderNumber       String      @unique @map(\"order_number\") // z.B. \"CV-2024-0001\"\n  userId            String?     @map(\"user_id\")\n  vehicleId         String?     @map(\"vehicle_id\")\n\n  // Adressen\n  shippingAddressId String?     @map(\"shipping_address_id\")\n  billingAddressId  String?     @map(\"billing_address_id\")\n\n  // Preise\n  subtotal          Decimal     @db.Decimal(10, 2)\n  shippingCost      Decimal     @default(0) @map(\"shipping_cost\") @db.Decimal(10, 2)\n  taxAmount         Decimal     @default(0) @map(\"tax_amount\") @db.Decimal(10, 2)\n  discount          Decimal     @default(0) @db.Decimal(10, 2)\n  total             Decimal     @db.Decimal(10, 2)\n\n  // Zahlung\n  paymentMethod     String?     @map(\"payment_method\")\n  paymentIntentId   String?     @unique @map(\"payment_intent_id\") // Stripe Payment Intent\n  paymentStatus     PaymentStatus @default(PENDING) @map(\"payment_status\")\n\n  // Status\n  status            OrderStatus @default(PENDING)\n\n  // Versand\n  shippingMethod    String?     @map(\"shipping_method\")\n  trackingNumber    String?     @map(\"tracking_number\")\n  shippedAt         DateTime?   @map(\"shipped_at\")\n  deliveredAt       DateTime?   @map(\"delivered_at\")\n\n  // Notizen\n  customerNote      String?     @map(\"customer_note\") @db.Text\n  internalNote      String?     @map(\"internal_note\") @db.Text\n\n  // Relationen\n  user              User?       @relation(fields: [userId], references: [id], onDelete: SetNull)\n  vehicle           Vehicle?    @relation(fields: [vehicleId], references: [id], onDelete: SetNull)\n  shippingAddress   Address?    @relation(\"ShippingAddress\", fields: [shippingAddressId], references: [id])\n  billingAddress    Address?    @relation(\"BillingAddress\", fields: [billingAddressId], references: [id])\n  items             OrderItem[]\n\n  // Timestamps\n  createdAt         DateTime    @default(now()) @map(\"created_at\")\n  updatedAt         DateTime    @updatedAt @map(\"updated_at\")\n\n  @@map(\"orders\")\n}\n\n/// Bestellpositionen\nmodel OrderItem {\n  id            String    @id @default(cuid())\n  orderId       String    @map(\"order_id\")\n  productId     String?   @map(\"product_id\")\n\n  // Produktdaten (zum Zeitpunkt der Bestellung)\n  sku           String\n  name          String\n  price         Decimal   @db.Decimal(10, 2)\n  quantity      Int\n  total         Decimal   @db.Decimal(10, 2)\n\n  // Relationen\n  order         Order     @relation(fields: [orderId], references: [id], onDelete: Cascade)\n  product       Product?  @relation(fields: [productId], references: [id], onDelete: SetNull)\n\n  @@map(\"order_items\")\n}\n\nenum OrderStatus {\n  PENDING       // Ausstehend\n  PROCESSING    // In Bearbeitung\n  SHIPPED       // Versendet\n  DELIVERED     // Zugestellt\n  CANCELLED     // Storniert\n  REFUNDED      // Erstattet\n}\n\nenum PaymentStatus {\n  PENDING       // Ausstehend\n  PAID          // Bezahlt\n  FAILED        // Fehlgeschlagen\n  REFUNDED      // Erstattet\n}\n\n// =============================================================================\n// WERKSTATT-SERVICES (OpenCarBox)\n// =============================================================================\n\n/// Service-Kategorien\nmodel ServiceCategory {\n  id            String    @id @default(cuid())\n  name          String\n  slug          String    @unique\n  description   String?\n  image         String?\n  sortOrder     Int       @default(0) @map(\"sort_order\")\n\n  services      Service[]\n\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  @@map(\"service_categories\")\n}\n\n/// Werkstatt-Services\nmodel Service {\n  id            String    @id @default(cuid())\n  categoryId    String?   @map(\"category_id\")\n\n  name          String\n  slug          String    @unique\n  description   String?   @db.Text\n\n  // Preise\n  priceFrom     Decimal?  @map(\"price_from\") @db.Decimal(10, 2)\n  priceTo       Decimal?  @map(\"price_to\") @db.Decimal(10, 2)\n  priceType     PriceType @default(FIXED) @map(\"price_type\")\n\n  // Dauer\n  durationMinutes Int?    @map(\"duration_minutes\")\n\n  // Medien\n  image         String?\n\n  // Status\n  isActive      Boolean   @default(true) @map(\"is_active\")\n\n  // Relationen\n  category      ServiceCategory? @relation(fields: [categoryId], references: [id])\n  appointments  Appointment[]\n\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  @@map(\"services\")\n}\n\nenum PriceType {\n  FIXED         // Festpreis\n  FROM          // Ab-Preis\n  ON_REQUEST    // Auf Anfrage\n}\n\n/// Werkstatt-Termine\nmodel Appointment {\n  id            String    @id @default(cuid())\n  userId        String?   @map(\"user_id\")\n  vehicleId     String?   @map(\"vehicle_id\")\n  serviceId     String    @map(\"service_id\")\n\n  // Termin\n  date          DateTime\n  timeSlot      String    @map(\"time_slot\") // z.B. \"09:00-10:00\"\n\n  // Kontakt (falls nicht eingeloggt)\n  customerName  String?   @map(\"customer_name\")\n  customerEmail String?   @map(\"customer_email\")\n  customerPhone String?   @map(\"customer_phone\")\n\n  // Status\n  status        AppointmentStatus @default(PENDING)\n\n  // Notizen\n  customerNote  String?   @map(\"customer_note\") @db.Text\n  internalNote  String?   @map(\"internal_note\") @db.Text\n\n  // Relationen\n  user          User?     @relation(fields: [userId], references: [id], onDelete: SetNull)\n  vehicle       Vehicle?  @relation(fields: [vehicleId], references: [id], onDelete: SetNull)\n  service       Service   @relation(fields: [serviceId], references: [id])\n\n  // Timestamps\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  @@map(\"appointments\")\n}\n\nenum AppointmentStatus {\n  PENDING       // Anfrage\n  CONFIRMED     // Best√§tigt\n  IN_PROGRESS   // In Bearbeitung\n  COMPLETED     // Abgeschlossen\n  CANCELLED     // Abgesagt\n  NO_SHOW       // Nicht erschienen\n}\n\n// =============================================================================\n// BEWERTUNGEN\n// =============================================================================\n\n/// Produkt- und Service-Bewertungen\nmodel Review {\n  id            String    @id @default(cuid())\n  userId        String    @map(\"user_id\")\n  productId     String?   @map(\"product_id\")\n\n  // Bewertung\n  rating        Int       // 1-5\n  title         String?\n  content       String?   @db.Text\n\n  // Status\n  isVerified    Boolean   @default(false) @map(\"is_verified\") // Verifizierter Kauf\n  isApproved    Boolean   @default(false) @map(\"is_approved\")\n\n  // Relationen\n  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)\n  product       Product?  @relation(fields: [productId], references: [id], onDelete: Cascade)\n\n  // Timestamps\n  createdAt     DateTime  @default(now()) @map(\"created_at\")\n  updatedAt     DateTime  @updatedAt @map(\"updated_at\")\n\n  @@map(\"reviews\")\n}\n",
  "copilotInstructions": "# AI Copilot Instructions - OpenCarBox & Carvantooo\n\n> Premium Automotive Multisite Platform | Next.js 14 + TypeScript + Supabase\n\n## Architecture Overview\n\n**Three-site platform** sharing one codebase: Carvantooo (Shop, rot `#E53E3E`), OpenCarBox Werkstatt + Autohandel (blau `#3182CE`).\n\n```\nClient: React + TanStack Query + Zustand | TypeScript strict\nServer: Next.js App Router (API Routes + Server Actions)\nBackend: Supabase (Auth+DB+Storage+RLS) | Prisma ORM\nExternal: Stripe, Meilisearch, TecDoc API, Resend\n```\n\n**Golden Rule:** External API calls (Stripe, TecDoc) ‚Üí API routes/Server Actions only. Never from client.\n\n## Critical Patterns\n\n### Data Fetching (ALWAYS TanStack Query)\n```typescript\n// ‚úÖ Correct - TanStack Query\nconst { data, isPending } = useQuery({\n  queryKey: ['products'],\n  queryFn: () => fetch('/api/products').then(r => r.json()),\n})\n\n// ‚ùå NEVER useEffect + useState for fetching\n```\n\n### Row Level Security\nSupabase RLS is enforced at DB level. Every query is auto-scoped to user - trust the DB, not app logic.\n\n### Vehicle Compatibility (HSN/TSN)\nCore feature: Products/services linked to vehicles via HSN/TSN codes. See `product_vehicle_compatibility` table.\n\n## Project Structure\n\n| Path | Purpose |\n|------|---------|\n| `src/app/` | App Router routes |\n| `src/components/{layout,ui,shared,providers}/` | Component hierarchy |\n| `src/lib/supabase/` | DB clients (client.ts, server.ts, middleware.ts) |\n| `src/stores/` | Zustand stores (cart, ui) |\n| `prisma/schema.prisma` | Database schema - **read first** |\n| `scripts/core/` | Oracle + Memory system |\n\n**Always use `@/` imports:** `import { x } from '@/lib/utils'`\n\n## Essential Commands\n\n```bash\nnpm run dev              # Development server\nnpm run db:push          # Sync Prisma schema to Supabase\nnpm run db:studio        # Prisma GUI\nnpm run type-check       # TypeScript validation\nnpm run quality-gate     # Full quality check before commit\nnpm run oracle:status    # Check Oracle system state\n```\n\n## Oracle & Memory System\n\nThis project uses AI-assisted development via `scripts/core/`:\n- **oracle.ts** - Thinking process (consult before major changes)\n- **memory.ts** - Stores patterns in `project_memory` table\n- Run `npm run oracle:before \"action\" \"description\"` before changes\n\n## Key Rules\n\n1. **Read `project_specs.md`** - The constitution for architecture/branding\n2. **TypeScript strict** - No `any`, no implicit null\n3. **Tailwind only** - No inline styles, use design tokens\n4. **8px grid** - All spacing in 8px increments\n5. **No placeholders** - Complete all features fully\n6. **RLS-aware** - Database security is enforced at query level\n7. **German UI** - Code in English, user-facing text in German\n\n## Common Pitfalls\n\n| Don't | Do Instead |\n|-------|------------|\n| Client-side Stripe/TecDoc calls | API routes + Server Actions |\n| `useEffect` for data fetching | TanStack Query |\n| Relative imports `../../../` | Path aliases `@/` |\n| Hardcoded colors | Tailwind tokens (`bg-red-600`) |\n| Skip type-check | Run `npm run quality-gate` |\n\n**Architecture docs:** [docs/architecture/system-overview.md](docs/architecture/system-overview.md)\n",
  "recentMemories": "Keine Erinnerungen vorhanden.",
  "pendingTasks": "### Lokale Task-Queue:\n\n- [BLOCKER] BLOCKER: Supabase & Prisma Setup - Datenbank-Schema synchronisieren und Authentifizierung implementieren (PENDING)\n- [BLOCKER] BLOCKER: Supabase & Prisma Setup - Datenbank-Schema synchronisieren und Authentifizierung implementieren. Schritte: 1. Supabase-Projekt 'acclrhzzwdutbigxsxyq' mit Service Role Key verbinden. 2. Prisma Schema mit `npx prisma db push` synchronisieren. 3. Supabase Auth in Next.js App Router integrieren (Client, Server, Middleware). 4. Basic Authentifizierung testen (Login/Logout). 5. Oracle Memory auf Supabase umstellen. (PENDING)\n- [BLOCKER] BLOCKER: Supabase & Prisma Setup - Datenbank-Schema synchronisieren und Authentifizierung implementieren. Schritte: 1. Supabase-Projekt 'acclrhzzwdutbigxsxyq' mit Service Role Key verbinden. 2. Prisma Schema mit `npx prisma db push` synchronisieren. 3. Supabase Auth in Next.js App Router integrieren (Client, Server, Middleware). 4. Basic Authentifizierung testen (Login/Logout). 5. Oracle Memory auf Supabase umstellen. (PENDING)\n- [BLOCKER] BLOCKER: Supabase Datenbankverbindung fixen und Prisma Schema synchronisieren. Schritte: 1. Supabase Dashboard √∂ffnen (acclrhzzwdutbigxsxyq) ‚Üí Project Settings ‚Üí Database. 2. Connection Pooling pr√ºfen: Connection String f√ºr Prisma verwenden. 3. Network Restrictions: IP des aktuellen Rechners whitelisten (oder 'Allow all' f√ºr Development). 4. Mit `npx prisma db push` Schema synchronisieren. 5. Mit `npx prisma studio` Verbindung testen. 6. Bei Erfolg: Oracle Memory initialisieren (erste Eintr√§ge in project_memory). (PENDING)\n- [BLOCKER] BLOCKER: Supabase Datenbankverbindung fixen und Prisma Schema synchronisieren. Schritte: 1. Supabase Dashboard √∂ffnen (acclrhzzwdutbigxsxyq) ‚Üí Project Settings ‚Üí Database. 2. Connection Pooling pr√ºfen: Connection String f√ºr Prisma verwenden. 3. Network Restrictions: IP des aktuellen Rechners whitelisten (oder 'Allow all' f√ºr Development). 4. Mit `npx prisma db push` Schema synchronisieren. 5. Mit `npx prisma studio` Verbindung testen. 6. Bei Erfolg: Oracle Memory initialisieren (erste Eintr√§ge in project_memory). (PENDING)\n- [BLOCKER] BLOCKER: Supabase-Datenbankverbindung fixen und Prisma Schema synchronisieren. Schritte: 1. Supabase Dashboard √∂ffnen (acclrhzzwdutbigxsxyq) ‚Üí Project Settings ‚Üí Database. 2. Connection Pooling pr√ºfen: Connection String f√ºr Prisma verwenden. 3. Network Restrictions: IP des aktuellen Rechners whitelisten (oder 'Allow all' f√ºr Development). 4. Mit `npx prisma db push` Schema synchronisieren. 5. Mit `npx prisma studio` Verbindung testen. 6. Bei Erfolg: Oracle Memory initialisieren (erste Eintr√§ge in project_memory). (PENDING)\n- [BLOCKER] BLOCKER: Supabase-Datenbankverbindung fixen und Prisma Schema synchronisieren. Schritte: 1. Supabase Dashboard √∂ffnen (acclrhzzwdutbigxsxyq) ‚Üí Project Settings ‚Üí Database. 2. Connection Pooling pr√ºfen: Connection String f√ºr Prisma verwenden. 3. Network Restrictions: IP des aktuellen Rechners whitelisten (oder 'Allow all' f√ºr Development). 4. Mit `npx prisma db push` Schema synchronisieren. 5. Mit `npx prisma studio` Verbindung testen. 6. Bei Erfolg: Oracle Memory initialisieren (erste Eintr√§ge in project_memory). (PENDING)\n- [BLOCKER] BLOCKER: Supabase-Datenbankverbindung fixen und Prisma Schema synchronisieren. Schritte: 1. Supabase Dashboard √∂ffnen (acclrhzzwdutbigxsxyq) ‚Üí Project Settings ‚Üí Database. 2. Connection Pooling pr√ºfen: Connection String f√ºr Prisma verwenden. 3. Network Restrictions: IP des aktuellen Rechners whitelisten (oder 'Allow all' f√ºr Development). 4. Mit `npx prisma db push` Schema synchronisieren. 5. Mit `npx prisma studio` Verbindung testen. 6. Bei Erfolg: Oracle Memory initialisieren (erste Eintr√§ge in project_memory). (PENDING)\n- [BLOCKER] BLOCKER: Supabase-Datenbankverbindung fixen und Prisma Schema synchronisieren. Schritte: 1. Supabase Dashboard √∂ffnen (acclrhzzwdutbigxsxyq) ‚Üí Project Settings ‚Üí Database. 2. Connection Pooling pr√ºfen: Connection String f√ºr Prisma verwenden. 3. Network Restrictions: IP des aktuellen Rechners whitelisten (oder 'Allow all' f√ºr Development). 4. Mit `npx prisma db push` Schema synchronisieren. 5. Mit `npx prisma studio` Verbindung testen. 6. Bei Erfolg: Oracle Memory initialisieren (erste Eintr√§ge in project_memory). (PENDING)\n- [BLOCKER] BLOCKER: Supabase-Datenbankverbindung fixen und Prisma Schema synchronisieren. Schritte: 1. Supabase Dashboard √∂ffnen (acclrhzzwdutbigxsxyq) ‚Üí Project Settings ‚Üí Database. 2. Connection Pooling pr√ºfen: Connection String f√ºr Prisma verwenden. 3. Network Restrictions: IP des aktuellen Rechners whitelisten (oder 'Allow all' f√ºr Development). 4. Mit `npx prisma db push` Schema synchronisieren. 5. Mit `npx prisma studio` Verbindung testen. 6. Bei Erfolg: Oracle Memory initialisieren (erste Eintr√§ge in project_memory). (PENDING)\n\n### K√ºrzlich abgeschlossen:\n\n- ‚úÖ BLOCKER: Supabase-Datenbankverbindung fixen und Prisma Schema synchronisieren. Schritte: 1. Supabase Dashboard √∂ffnen (acclrhzzwdutbigxsxyq) ‚Üí Project Settings ‚Üí Database. 2. Connection Pooling pr√ºfen: Connection String f√ºr Prisma verwenden. 3. Network Restrictions: IP des aktuellen Rechners whitelisten (oder 'Allow all' f√ºr Development). 4. Mit `npx prisma db push` Schema synchronisieren. 5. Mit `npx prisma studio` Verbindung testen. 6. Bei Erfolg: Oracle Memory initialisieren (erste Eintr√§ge in project_memory)."
}